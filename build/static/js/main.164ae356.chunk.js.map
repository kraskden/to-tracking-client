{"version":3,"sources":["net/config.js","net/AuthApi.js","profile/RegPage.js","profile/LoginPage.js","navbar/NavBar.js","summary/SummaryTable.js","charts/PieDiagram.js","charts/LineDiagram.js","user/components/DataContext.js","user/parsers/Summary.js","user/parsers/Pie.js","charts/SwitchDiagram.js","user/UserHome.js","user/components/Switch.js","charts/BarDiagram.js","user/parsers/Bar.js","user/UserSummary.js","charts/controls/Dropdown.js","charts/DropdownDiagram.js","user/UserMonitoring.js","net/TrackApi.js","compare/components/CompareForm.js","charts/MultipleBarDiagram.js","compare/utils/CompareValuesGroups.js","compare/utils/CompareValuesParser.js","compare/components/CompareBarDiagram.js","compare/components/UserList.js","compare/Compare.js","user/components/UserBox.js","user/components/SubButton.js","user/components/Tabs.js","user/UserPage.js","user/TrackPage.js","profile/LogoutPage.js","profile/AdminPage.js","profile/components/AccCard.js","profile/ProfileFav.js","profile/components/AddAccountForm.js","profile/ProfileAcc.js","profile/ProfilePage.js","Home.js","App.js","index.js"],"names":["serverUrl","process","REACT_APP_SERVER_URL","AuthApi","login","password","a","fetch","method","headers","body","JSON","stringify","res","status","Promise","reject","json","msg","jwt","localStorage","setItem","resolve","logout","removeItem","register","invite","getUserInfo","token","getItem","postSub","url","subTo","user","unsubFrom","addAccount","RegPage","props","handleSubmit","e","preventDefault","current","value","then","history","push","catch","setState","message","React","createRef","state","className","id","onSubmit","this","encType","htmlFor","type","ref","name","placeholder","required","autoFocus","Component","LoginPage","console","log","onProfile","replace","err","DropdownItem","data","href","role","data-toggle","aria-haspopup","aria-expanded","aria-labelledby","accounts","map","el","key","MakeDropdown","NavBar","onUserChange","data-target","aria-controls","aria-label","profileData","PropertyTable","items","obj","idx","val","toLocaleString","SummaryTable","objs","PieDiagram","width","height","viewBox","style","labels","fontSize","colorScale","standalone","LineDiagram","transformData","slice","ret","x","y","toFixed","date","Date","timestamp","getUTCDate","getUTCMonth","prevProps","period","dataKey","stroke","strokeDasharray","domain","DataContext","createContext","SummaryParser","makeFav","sortedData","entry","undefFix","arrs","arr","elem","undefined","makeHomeSummary","time","activities","sort","b","favTurret","favHull","score","Math","floor","kills","deaths","cry","makePeriodSummary","favMode","favModule","dd","supplies","find","supp","count","batt","golds","makeShortSummary","PieParser","limit","activityData","filter","act","totalScore","reduce","acc","curr","totalTime","otherTime","otherScore","SwitchDiagram","handlePeriodChange","target","handleStateChange","periods","types","btnPeriod","str","onClick","defaultChecked","btnType","periodHolder","length","typesHolder","createElement","graph","UserHome","handleChange","context","summData","tracking","turretPieData","decorate","makeActivity","hullPieData","modePieData","contextType","Switch","switches","onChange","BarDiagram","layout","margin","top","right","left","bottom","fill","BarParser","round","BarDiagramWrapper","UserSummary","onPeriodChange","lastTracking","itemActivity","item","parseActivity","Dropdown","values","arr1","arr2","i","prevState","compareArrays","DropdownDiagram","updateElements","handleElemChange","element","elements","Set","activity","add","next","getData","forEach","row","diagram","UserMonitoring","TrackApi","fetchData","ok","error","getAllTrack","getLastTrack","CompareForm","useState","input","setInput","callbacks","addUser","setUsersData","event","trim","oldState","isLoading","aria-describedby","MultipleBarDiagram","diagramData","Charts","index","dataName","calcHeight","sorted","first","second","Nums","Ratios","dividend","divider","parseTime","users","roundNum","parseTimeFor","parseNum","number","parseNumFor","parseRatio","dividendKey","dividerKey","rounded","parseRatioFor","num","Number","EPSILON","CompareBarDiagram","usersData","setDiagramData","selected","setSelected","useEffect","parsedNums","parsedRatios","parsedTime","UserList","delCallback","to","UserCompare","initialUsersDataState","useContext","userData","newData","splice","aria-hidden","ranks","UserBox","rank","prev","getRank","percent","getPercent","aria-valuenow","aria-valuemin","aria-valuemax","SubButton","onSub","finally","onUnsub","subButton","button","favourites","Tabs","onTabChange","isActive","tab","tabs","aria-selected","createTabs","UserPage","updateData","isLoaded","ChooseComponent","newTab","Provider","bind","TrackPage","newUser","window","pushState","LogoutPage","AdminPage","echo","text","refs","return","handler","autofocus","AccCard","fetchSummary","summary","ProfileFav","cards","AddAccountForm","loginRef","inviteRef","document","getElementById","click","data-dismiss","for","ProfileAcc","textAlign","tabindex","ProfilePage","Home","App","onProfileChange","info","exact","path","children","match","params","ReactDOM","render"],"mappings":"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","file":"static/js/main.164ae356.chunk.js","sourcesContent":["const serverUrl = process.env.REACT_APP_SERVER_URL || \"http://ec2-18-217-198-173.us-east-2.compute.amazonaws.com:4000\"\n\nexport default serverUrl\n","import serverUrl from './config'\n\n\nlet AuthApi = {}\n\nAuthApi.login = async (login, password) => {\n    let res = await fetch(`${serverUrl}/profile/login`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            login: login,\n            password: password\n        })\n    })\n    if (res.status !== 200) {\n        return Promise.reject()\n    }\n    let msg = await res.json()\n    if (msg.jwt) {\n        localStorage.setItem('RTG_JWT', msg.jwt)\n        return Promise.resolve()\n    } else {\n        return Promise.reject()\n    }\n}\n\nAuthApi.logout = () => {\n    localStorage.removeItem('RTG_JWT')\n}\n\nAuthApi.register = async (login, password, invite) => {\n    let res = await fetch(`${serverUrl}/profile/register`, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            login: login,\n            password: password,\n            invite: invite\n        })\n    })\n    if (res.status === 200) {\n        return Promise.resolve()\n    } else {\n        return Promise.reject()\n    }\n}\n\n// Retrive user information\nAuthApi.getUserInfo = async () => {\n    let token = localStorage.getItem('RTG_JWT')\n    if (token === null) {\n        return Promise.reject()\n    }\n    let res = await fetch(`${serverUrl}/profile/`, {\n        method: 'GET',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    })\n    if (res.status !== 200) {\n        return Promise.reject()\n    } else {\n        return await res.json()\n    }\n}\n\nlet postSub = async (url) => {\n    let token = localStorage.getItem('RTG_JWT')\n    if (token === null) {\n        return Promise.reject()\n    }\n    let res = await fetch(url, {\n        method: 'POST',\n        headers: {\n            'Authorization': `Bearer ${token}`\n        }\n    })\n    if (res.status !== 200) {\n        return Promise.reject()\n    }\n    return Promise.resolve()\n}\n\nAuthApi.subTo = async (user) => {\n    return postSub(`${serverUrl}/profile/sub/${user}`)\n}\n\nAuthApi.unsubFrom = async (user) => {\n    return postSub(`${serverUrl}/profile/unsub/${user}`)\n}\n\nAuthApi.addAccount = async (login, invite) => {\n    let token = localStorage.getItem('RTG_JWT')\n    let res = await fetch(`${serverUrl}/profile/add/${login}`, {\n        method: 'POST',\n        headers: {\n            'Authorization': `Bearer ${token}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            login: login,\n            invite: invite\n        })\n    })\n    if (res.status !== 200 ) {\n        return Promise.reject()\n    } else {\n        return Promise.resolve()\n    }\n}\n\n\nexport default AuthApi","import React, { Component } from 'react'\nimport AuthApi from '../net/AuthApi'\n\nexport default class RegPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.login = React.createRef()\n        this.password = React.createRef()\n        this.invite = React.createRef()\n\n        this.state = {\n            message: \"Sign Up\"\n        }\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        AuthApi.register(this.login.current.value, this.password.current.value,\n             this.invite.current.value).then(() => {\n                 this.props.history.push('/login')\n             }).catch(() => {\n                 this.setState({\n                     message: \"Try again\"\n                 })\n             })\n    }\n    \n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"row d-flex justify-content-center\">\n                    <div className=\"col-md-4 text-center\">\n                        <form id=\"form-login\" onSubmit={this.handleSubmit} method=\"post\" encType=\"multipart/form-data\">\n                            <h1 className=\"h3 mb-3 font-weight-normal mt-2\">{this.state.message}</h1>\n                            <label htmlFor=\"inputLogin\" className=\"sr-only\">Login</label>\n                            <input type=\"text\" id=\"inputLogin\" ref={this.login} name=\"login\" className=\"form-control mb-2\" placeholder=\"Login\" required autoFocus />\n                            <label htmlFor=\"inputPassword\" className=\"sr-only\">Password</label>\n                            <input type=\"password\" id=\"inputPassword\" ref={this.password} name=\"password\" className=\"form-control mb-2\" placeholder=\"Password\" required />\n                            <label htmlFor=\"inputInvite\" className=\"sr-only\">Invite</label>\n                            <input type=\"text\" id=\"inputInvite\" ref={this.invite} name=\"invite\" className=\"form-control mb-2\" placeholder=\"Invite\" required />\n                            <button className=\"btn btn-lg btn-secondary btn-block\" type=\"submit\">Sign up</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport AuthApi from '../net/AuthApi'\n\nexport default class LoginPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.login = React.createRef()\n        this.password = React.createRef()\n       \n        this.state = {\n            message: \"Sign In\"\n        }\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        AuthApi.login(this.login.current.value, this.password.current.value).then(() => {\n            console.log(\"OK\")\n            this.props.onProfile()\n            this.props.history.replace('/')\n        }).catch((err) => {\n            this.setState({\n                message: \"Try again\"\n            })\n        })\n    }\n    \n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"row d-flex justify-content-center\">\n                    <div className=\"col-md-4 text-center\">\n                        <form id=\"form-login\" onSubmit={this.handleSubmit} method=\"post\" encType=\"multipart/form-data\">\n                            <h1 className=\"h3 mb-3 font-weight-normal mt-2\">{this.state.message}</h1>\n                            <label htmlFor=\"inputLogin\" className=\"sr-only\">Login</label>\n                            <input type=\"text\" id=\"inputLogin\" ref={this.login} name=\"login\" className=\"form-control mb-2\" placeholder=\"Login\" required autoFocus />\n                            <label htmlFor=\"inputPassword\" className=\"sr-only\">Password</label>\n                            <input type=\"password\" id=\"inputPassword\" ref={this.password} name=\"password\" className=\"form-control mb-2\" placeholder=\"Password\" required />\n                            <button className=\"btn btn-lg btn-secondary btn-block\" type=\"submit\">Sign in</button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\n\nfunction DropdownItem(props) {\n\n    if (props.data) {\n        return (\n            <>\n            <a className=\"nav-link dropdown-toggle\" href=\"/#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            {props.data.login}\n            </a>\n            <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n                <a className=\"dropdown-item\" href=\"/profile\">Profile</a>\n                <div className=\"dropdown-divider\"></div>\n                    {props.data.accounts.map((el) => {\n                        return (\n                            <a className=\"dropdown-item\" href={`/user/${el.login}`} key={el.login}>{el.login}</a>\n                        )\n                    })}\n                <div className=\"dropdown-divider\"></div>\n                <a className=\"dropdown-item\" href=\"/logout\">Logout</a>\n            </div>\n            </>\n        )\n    } else {\n        return (\n            <>\n            <a className=\"nav-link dropdown-toggle\" href=\"/#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                Action\n                </a>\n                <div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n                    <a className=\"dropdown-item\" href=\"/login\">Login</a>\n                    <a className=\"dropdown-item\" href=\"/signup\">Register</a>\n                </div>\n                \n            </>\n        )\n    }\n}\n\nfunction MakeDropdown(props) {\n    return (\n        <ul className=\"navbar-nav ml-auto\">\n            <li className=\"nav-item dropdown\">\n                <DropdownItem data={props.data} />\n            </li>\n        </ul>\n    )\n}\n\nexport default class NavBar extends Component {\n\n    constructor(props) {\n        super(props)\n        this.user = React.createRef()\n\n    }\n\n    onSubmit = (e) => {\n        e.preventDefault()\n        this.props.onUserChange(this.user.current.value)\n        this.user.current.value = \"\"\n    }\n\n    render() {\n        \n        return (\n            <nav className=\"navbar navbar-expand-md navbar-light bg-light\">\n            <a className=\"navbar-brand\" href=\"/#\">Tanki Rating</a>\n            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span className=\"navbar-toggler-icon\"></span>\n            </button>\n\n            <div className=\"collapse navbar-collapse flex-row\" id=\"navbarSupportedContent\">\n                <form className=\"form-inline ml-md-4 my-2 my-md-0 flex-md-col  \" onSubmit={this.onSubmit}>\n                    <input className=\"form-control mr-sm-2\" ref={this.user} type=\"search\" placeholder=\"Search\" aria-label=\"Search\"/>\n                    <button className=\"btn btn-outline-success my-2 my-sm-0\" type=\"submit\">Search</button>\n                </form>\n                <MakeDropdown data={this.props.profileData} />\n            </div>\n            </nav>\n        )\n    }\n}","import React from 'react'\n\nfunction PropertyTable(props) {\n    let items = props.obj.map((el, idx) => {\n        let val = el[1] && el[1].toLocaleString ? el[1].toLocaleString() : el[1]\n        if (el[0] === \"__empty\") {\n            return  (\n                <li key={idx} >\n                    <div className=\"property-empty\"></div>\n                </li>\n            )\n        }\n        return (\n            <li key={el[0]} >\n                <div className='property-key'>{el[0]}</div>\n                <div className='property-spacer mx-1'></div>\n                <div className='property-value'>{val}</div>\n            </li>\n        )\n    })\n    return (\n        <ul className=\"property-table pl-0\">\n            {items}\n        </ul>\n    )\n}\n\n\nexport default function SummaryTable(props) {\n    return (\n        <div className=\"summary-table mt-0 row\">\n            <div className=\"col-6\">\n                <PropertyTable obj={props.objs[0]} />\n            </div>\n            <div className=\"col-6\">\n                <PropertyTable obj={props.objs[1]} />\n            </div>\n        </div>\n    )\n}","import React, { Component } from 'react'\nimport {VictoryPie} from 'victory' \n\nexport default class PieDiagram extends Component {\n  render() {\n\n    return (\n      <svg width=\"400\" height=\"400\" role=\"img\" viewBox=\"0 0 400 400\" style={{\"pointerEvents\": \"all\", width: \"100%\", height: \"80%\"}} >\n        <VictoryPie \n        data={this.props.data}\n        style={{labels: {\n          fontSize: 20\n        }}}\n        colorScale=\"qualitative\"\n        standalone={false}\n      />\n      </svg>\n      \n    )\n  }\n}","import React, { Component } from 'react';\nimport { LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';\n\n\nexport default class LineDiagram extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            data: this.transformData()\n        }\n    }\n    \n    transformData() {\n        this.data = this.props.data.slice(0)\n        this.data = this.data.map((el) => {\n            let ret = {}\n            ret[this.props.x] = el[this.props.x]\n            ret[this.props.y] = el[this.props.y] ? el[this.props.y] : 0;\n            if (this.props.y === \"time\") {\n                ret[this.props.y] = (ret[this.props.y] / 3600).toFixed(1)\n            }\n            if (this.props.x === \"timestamp\") {\n                let date = new Date(el[this.props.x])\n                ret.timestamp = `${date.getUTCDate()}/${date.getUTCMonth() + 1}`\n            }\n            return ret\n        })\n        return this.data\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.y !== this.props.y || prevProps.x !== this.props.x || prevProps.period !== this.props.period || this.props.data !== prevProps.data) {\n            this.setState({\n                data: this.transformData()\n            })\n        }\n    }\n\n    render() {\n        return (\n            <ResponsiveContainer width='100%' height={this.props.height}>\n                <LineChart data={this.state.data}>\n                <Line type='monotone' dataKey={this.props.y} stroke='#3a3af9' />\n                <CartesianGrid stroke=\"#373737\" strokeDasharray=\"5 5\" />\n                <XAxis dataKey={this.props.x} />\n                <YAxis dataKey={this.props.y} domain={[0, 'auto']}/>\n                <Tooltip/>\n                </LineChart>\n            </ResponsiveContainer>\n        );\n    }\n}","import React from 'react'\n\nlet DataContext = React.createContext(null)\n\nexport default DataContext","let SummaryParser = {}\n\nfunction makeFav(sortedData, role) {\n    for (const entry of sortedData) {\n        if (entry.role === role) {\n            return entry.name\n        }\n    }\n    return \"N/A\"\n}\n\nfunction undefFix(arrs) {\n    for (const arr of arrs) {\n        for (const elem of arr) {\n            if (elem[1] === undefined || `${elem[1]}` === \"NaN\") {\n                elem[1] = \"\"\n            }\n        }\n    }\n    return arrs\n}\n\nSummaryParser.makeHomeSummary = (data) => {\n    let time = data.time / 3600 // to hours\n    data.activities.sort((a, b) => b.time - a.time)\n    let favTurret = makeFav(data.activities, 'Turret')\n    let favHull = makeFav(data.activities, 'Hull')\n    let first = [\n        [\"Score\", data.score],\n        [\"Time\", Math.floor(time)],\n        [\"Kills\", data.kills],\n        [\"Deaths\", data.deaths],\n        [\"Crystalls\", data.cry]\n    ]\n    let second = [\n        [\"K/D\", (data.kills / data.deaths).toFixed(2)],\n        [\"Score/Kills\", (data.score / data.kills).toFixed()],\n        [\"Cry/Score\", (data.cry / data.score).toFixed(2)],\n        [\"Turret\", favTurret],\n        [\"Hull\", favHull]\n    ]\n    return [first, second]\n}\n\n\n\nSummaryParser.makePeriodSummary = (data) => {\n    if (!data) {\n        return [[], []]\n    }\n    let time = data.time / 3600 // to hours\n    data.activities.sort((a, b) => b.time - a.time)\n\n    let favTurret = makeFav(data.activities, 'Turret')\n    let favHull = makeFav(data.activities, 'Hull')\n    let favMode = makeFav(data.activities, 'Mode')\n    let favModule = makeFav(data.activities, 'Module')\n\n    let dd = data.supplies.find(supp => supp.name === \"DD\") || {count: 0}\n    let batt = data.supplies.find(supp => supp.name === \"Battery\") || {count: 0}\n\n    let first = [\n        [\"Score\", data.score],\n        [\"Time\", time.toFixed(1)],\n        [\"Kills\", data.kills],\n        [\"Deaths\", data.deaths],\n        [\"Crystalls\", data.cry],\n        [\"Golds\", data.golds ? data.golds : 0],\n        [\"__empty\", \"\"],\n        [\"Turret\", favTurret],\n        [\"Hull\", favHull],\n        [\"__empty\", \"\"],\n        [\"DD/Hour\", (dd.count / time).toFixed()]\n    ]\n\n    let second = [\n        [\"K/D\", (data.kills / data.deaths).toFixed(2)],\n        [\"Score/Kills\", (data.score / data.kills).toFixed()],\n        [\"Cry/Score\", (data.cry / data.score).toFixed(2)],\n        [\"Kills/Hour\", (data.kills / time).toFixed()],\n        [\"Score/Hour\", (data.score / time).toFixed()],\n        [\"Cry/Hour\", (data.cry / time).toFixed()],\n        [\"__empty\", \"\"],\n        [\"Mode\", favMode],\n        [\"Module\", favModule],\n        [\"__empty\", \"\"],\n        [\"Battery/Hour\", (batt.count / time).toFixed()]\n    ]\n    \n    return undefFix([first, second])\n}\n\nSummaryParser.makeShortSummary = (data) => {\n    let time = data.time / 3600 // to hours\n\n    let first = [\n        [\"Exp\", data.score],\n        [\"Time\", time.toFixed(1)]\n    ]\n\n    let second = [\n        [\"K/D\", (data.kills / data.deaths).toFixed(2)],\n        [\"Cry\", data.cry]\n    ]\n\n    return undefFix([first, second])\n}\n\nexport default SummaryParser","let PieParser = {}\n\nPieParser.makeActivity = (data, role, limit) => {\n    let activityData = \n        data.activities.filter((act) => act.role === role && act.time > 0).sort((a, b) => b.time - a.time)\n    let totalScore = activityData.reduce((acc, curr) => acc + curr.score, 0)\n    let totalTime = activityData.reduce((acc, curr) => acc + curr.time, 0)\n    activityData = activityData.filter((act) => (act.time / totalTime) >= 1/14 )\n    if (limit) {\n        activityData = activityData.slice(0, limit)\n    }\n    let otherTime = totalTime - activityData.reduce((acc, curr) => acc + curr.time, 0)\n    let otherScore = totalScore - activityData.reduce((acc, curr) => acc + curr.score, 0)\n    if (otherTime !== 0) {\n        activityData.push({\n            name: \"Others\",\n            score: otherScore,\n            time: otherTime\n        })\n    }\n    \n    return activityData\n}\n\nPieParser.decorate = (activities) => {\n    return activities.map((act) => {\n        return {\n            x: act.name,\n            y: act.time\n        }\n    })\n}\n\nexport default PieParser","import React, { Component } from 'react'\n\n// PROPS: \n// periods : {id, name}\n// types: {id, name}\n// data\n// graph\n// x, height\n\nexport default class SwitchDiagram extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            period: props.periods[0].id,\n            type: props.types[0].id,\n        }\n    }\n\n    handlePeriodChange = (el) => {\n        this.setState({\n            period: el.target.id\n        })\n    }\n\n    handleStateChange = (el) => {\n        this.setState({\n            type: el.target.id\n        })\n    }\n\n    render() {\n        let btnPeriod = this.props.periods.map((el, idx) => {\n            let str = idx === 0 ? \"active\" : \"\"\n            return (\n                <label\n                    className={`btn btn-secondary ${str} `}\n                    key={el.id}\n                >\n                    <input\n                        type=\"radio\"\n                        onClick={this.handlePeriodChange}\n                        name=\"options\" id={el.id}\n                        defaultChecked\n                    />\n                    {el.name ? el.name : el.id}\n                </label>\n            )\n        })\n        let btnType = this.props.types.map((el, idx) => {\n            let str = idx === 0 ? \"active\" : \"\"\n            return (\n                <label\n                    className={`btn btn-secondary ${str}`}\n                    key={el.id}\n                >\n                    <input\n                        type=\"radio\"\n                        onClick={this.handleStateChange}\n                        name=\"options\" id={el.id}\n                        defaultChecked\n                    />\n                    {el.name ? el.name : el.id}\n                </label>\n            )\n        })\n        let periodHolder = btnPeriod.length > 1\n            ? <div className=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">{btnPeriod}</div>\n            : <div></div>\n        let typesHolder = btnType.length > 1\n            ? <div className=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">{btnType}</div>\n            : <div></div>\n        return (\n            <div>\n                <div className=\"row justify-content-start ml-3 mb-2\">\n                    <div className=\"col-md-auto\">\n                        {periodHolder}\n                    </div>\n                    <div className=\"col-md-auto\">\n                        {typesHolder}                              \n                    </div>\n                </div>\n                <div className=\"row\" >\n                    <div className=\"col-12\">\n                        {\n                            React.createElement(\n                                this.props.graph,\n                                {\n                                    data: this.props.data[this.state.period],\n                                    period: this.state.period,\n                                    height: this.props.height,\n                                    x: this.props.x,\n                                    y: this.state.type\n                                }\n                            )\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport SummaryTable from '../summary/SummaryTable'\nimport PieDiagram from '../charts/PieDiagram'\nimport LineDiagram from '../charts/LineDiagram'\nimport DataContext from '../user/components/DataContext'\nimport SummaryParser from './parsers/Summary'\nimport PieParser from './parsers/Pie'\nimport SwitchDiagram from '../charts/SwitchDiagram'\n\nexport default class UserHome extends Component {\n\n    static contextType = DataContext;\n\n    handleChange = (e) => {\n        console.log(e.target.id)\n    }\n\n    render() {\n        let data = this.context\n        let summData = this.context.tracking[0]\n\n        let turretPieData = PieParser.decorate(PieParser.makeActivity(summData, 'Turret', 5))\n        let hullPieData = PieParser.decorate(PieParser.makeActivity(summData, 'Hull', 5))\n        let modePieData = PieParser.decorate(PieParser.makeActivity(summData, 'Mode', 5))\n        return (\n            <div>\n                <div className=\"card mt-2\">\n                    <div className=\"card-body pb-0\">\n                        <SummaryTable objs={SummaryParser.makeHomeSummary(summData)} />\n                        <div className=\"row justify-content-center\">\n                            <div className=\"col-lg-3 col-md-4\">\n                                <PieDiagram data={turretPieData}/>\n                            </div>\n                            <div className=\"col-lg-3 col-md-4\">\n                                <PieDiagram data={hullPieData}/>\n                            </div>\n                            <div className=\"col-lg-3 col-md-4\">\n                                <PieDiagram data={modePieData}/>\n                            </div>\n                        </div>               \n                    </div>\n                </div>\n                <div className=\"card mt-2\">\n                    <div className=\"card-body \">\n                        <div className=\"row justify-content-center mb-2\">\n                            <h4>Player activity</h4>\n                        </div>\n                        <SwitchDiagram graph={LineDiagram} x='timestamp' height={300} \n                            data={data} \n                            periods={[{id: 'daily', name: 'Daily'}, {id: 'weekly', name: 'Weekly'}, {id: 'monthly', name: 'Monthly'}]} \n                            types={[{id: 'cry', name: 'Crystalls'}, {id: 'score', name: 'Score'}, {id: 'time', name: 'Time'}]}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\n\nexport default class Switch extends Component {\n    \n    render() {\n        let switches = this.props.switches.map((el, idx) => {\n            let str = idx === 0 ? \"active\" : \"\"\n            return (\n                <label\n                    className={`btn btn-secondary ${str}`}\n                    key={el.id}\n                >\n                    <input\n                        type=\"radio\"\n                        onClick={this.props.onChange}\n                        name=\"options\"\n                        id={el.id}\n                        defaultChecked\n                    />\n                    {el.name ? el.name : el.id}\n                </label>\n            )\n        })\n        return (\n            <div className=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">{switches}</div>\n        )\n    }\n}\n","import React, { Component } from 'react';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer,\n} from 'recharts';\n\nexport default class BarDiagram extends Component {\n  render() {\n    return (\n        <ResponsiveContainer width='100%' height={this.props.height}>\n            <BarChart \n                width={400} \n                height={500} \n                data={this.props.data} \n                layout=\"vertical\"\n                margin={{top: 5, right: 30, left: 20, bottom: 5}}\n            >\n                <XAxis type=\"number\"/>\n                <YAxis type=\"category\" dataKey={this.props.x} />\n                <CartesianGrid strokeDasharray=\"3 3\"/>\n                <Tooltip/>\n                <Bar dataKey={this.props.y} fill=\"#8884d8\" />\n            </BarChart>\n        </ResponsiveContainer>\n    );\n  }\n}\n","let BarParser = {}\n\nBarParser.parseActivity = (activities, role) => {\n    return activities.filter(act => act.role === role).map((act) => {\n        let res = {}\n        res.time = Math.round(act.time / 60)\n        res.name = act.name\n        return res\n    })\n}\n\nexport default BarParser","import React, { Component } from 'react'\nimport DataContext from './components/DataContext'\nimport SummaryTable from '../summary/SummaryTable'\nimport SummaryParser from '../user/parsers/Summary'\nimport Switch from './components/Switch'\nimport BarDiagram from '../charts/BarDiagram'\nimport BarParser from './parsers/Bar'\n\n\nfunction BarDiagramWrapper(props) {\n    return (\n        <BarDiagram height={30 * props.data.length + 40}\n            data={props.data}\n            x='name'\n            y='time'\n        />\n    )\n}\n\nexport default class UserSummary extends Component {\n\n    static contextType = DataContext\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            period: 'weekly'\n        }\n    }\n\n    onPeriodChange = (e) => {\n        this.setState({\n            period: e.target.id\n        })\n    }\n\n    render() {\n        // Be careful when change order of {'monthly', 'weekly'}\n        let tracking = this.context[this.state.period]\n        let lastTracking = tracking[tracking.length - 1] || {activities: []}\n\n        let itemActivity = {}\n        for (const item of ['Hull', 'Turret', 'Mode', 'Module']) {\n            itemActivity[item] = BarParser.parseActivity(lastTracking.activities, item)\n        }\n\n        console.log(itemActivity)\n\n        let objs = SummaryParser.makePeriodSummary(tracking[tracking.length - 1])\n        return (\n            <div>\n                <div className=\"pt-3\">\n                    <Switch \n                        switches={[{id: 'weekly', name: 'Last week'}, {id: 'monthly', name: 'Last month'},  {id: 'daily', name: 'Last day'}]}\n                        onChange={this.onPeriodChange}\n                    />\n                </div>\n                 <div className=\"card mt-2\">\n                    <div className=\"card-body pb-0\">\n                        <SummaryTable objs={objs} />\n                    </div>\n                </div>\n                <div className=\"card mt-2\">\n                    <div className=\"card-body pb-0\">\n                        <div className=\"row\">\n                            <div className=\"col-md-6\">\n                                <BarDiagramWrapper data={itemActivity['Turret']} />\n                            </div>\n                            <div className=\"col-md-6\">\n                                <BarDiagramWrapper data={itemActivity['Hull']} />\n                            </div>\n                        </div>\n                        <div className=\"row mt-5\">\n                            <div className=\"col-md-6\">\n                                <BarDiagramWrapper data={itemActivity['Mode']} />\n                            </div>\n                            <div className=\"col-md-6\">\n                                <BarDiagramWrapper data={itemActivity['Module']} />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\n\n\nexport default class Dropdown extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            value: props.values[0]\n        }\n        if (this.props.values[0])\n            this.props.onChange(this.props.values[0].id)\n    }\n\n    // compare by key\n    compareArrays(arr1, arr2, key) {\n        if (arr1.length !== arr2.length) {\n            return false\n        }\n        for (let i = 0; i < arr1.length; ++i) {\n            if (arr1[i][key] !== arr2[i][key]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (prevProps.values !== this.props.values) {\n            if (this.compareArrays(this.props.values, prevProps.values, 'id')) {\n                return \n            }\n            this.setState({\n                value: this.props.values[0]\n            })\n            if (this.props.values[0])\n                this.props.onChange(this.props.values[0].id)\n        }\n    }\n\n    onChange = (val) => {\n        this.setState({\n            value: val\n        })\n        this.props.onChange(val.id)\n    }\n\n    render() {\n        let items = this.props.values.map((val) => {\n            return (\n                // Line 50:112:  Script URL is a form of eval  no-script-url\n                // eslint-disable-next-line no-script-url\n                <button\n                    className=\"dropdown-item\"\n                    id={val.id}\n                    key={val.id}\n                    onClick={() => this.onChange(val)}\n                    // href=\"javascript:;\"\n                >{val.name}</button>\n            )\n        })\n        return (\n            <div className=\"dropdown\">\n                <button\n                    className=\"btn btn-secondary dropdown-toggle\"\n                    type=\"button\"\n                    id=\"dropdownMenuButton\"\n                    data-toggle=\"dropdown\"\n                    aria-haspopup=\"true\"\n                    aria-expanded=\"false\"\n                >\n                    {this.state.value ? this.state.value.name : \"No such data\"} \n                </button>\n                <div\n                    className=\"dropdown-menu\"\n                    aria-labelledby=\"dropdownMenuButton\"\n                >\n                    {items}\n                </div>\n            </div>    \n        )\n    }\n}\n","import React, { Component } from 'react'\nimport Dropdown from './controls/Dropdown'\n\n// PROPS: \n// periods : {id, name}\n// types: {id, name}\n// data\n// graph\n// x, height\nexport default class DropdownDiagram extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            period: props.periods[0].id,\n            type: props.types[0].id,\n            elements: [],\n            element: null\n        }\n    }\n\n    componentDidMount() {\n        this.updateElements()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.data.login !== this.props.data.login) {\n            this.updateElements()\n        } else {\n            console.log(\"!!!!\")\n        }\n    }\n\n    handlePeriodChange = (el) => {\n        this.setState({\n            period: el.target.id\n        }, this.updateElements)\n    }\n\n    handleStateChange = (el) => {\n        this.setState({\n            type: el\n        }, this.updateElements)\n    }\n\n    handleElemChange = (el) => {\n        this.setState({\n            element: el\n        })\n    }\n\n    // TODO: natural sorting\n    updateElements = () => {\n        let data = this.props.data[this.state.period]\n        let elements = new Set()\n        for (const elem of data) {\n            for (const activity of elem.activities.filter((el) => el.role === this.state.type)) {\n                elements.add(activity.name)\n            }\n        }\n        console.log(elements.values().next().value)\n        this.setState({\n            elements: [...elements.values()],\n            element: elements.values().next().value\n        })\n    }\n\n    getData = () => {\n        console.log(\"Get data\")\n        let data = this.props.data[this.state.period]\n        data.forEach((row) => {\n            let activity =  row.activities.filter((el) => el.name === this.state.element)[0]\n            row.time = activity ? activity.time : 0\n        })\n        return data.map((entry) => {\n            // DANGER HARDCODE!\n            return {\n                time: entry.time,\n                timestamp: entry.timestamp\n            }\n        })\n    }\n\n    render() {\n        let btnPeriod = this.props.periods.map((el, idx) => {\n            let str = idx === 0 ? \"active\" : \"\"\n            return (\n                <label\n                    className={`btn btn-secondary ${str}`}\n                    key={el.id}\n                >\n                    <input\n                        type=\"radio\"\n                        onClick={this.handlePeriodChange}\n                        name=\"options\" id={el.id}\n                        defaultChecked\n                    />\n                    {el.name ? el.name : el.id}\n                </label>\n            )\n        })\n        \n        let periodHolder = btnPeriod.length > 1\n            ? <div className=\"btn-group btn-group-toggle\" data-toggle=\"buttons\">{btnPeriod}</div>\n            : <div></div>\n\n        let diagram = <div></div>\n\n        if (this.state.element) {\n            diagram = React.createElement(this.props.graph, {\n                data: this.getData(),\n                period: this.state.period,\n                height: this.props.height,\n                x: this.props.x, \n                y: 'time'})\n        }\n        return (\n            <div>\n                <div className=\"row justify-content-start ml-3 mb-2\">\n                    <div className=\"col-md-auto\">\n                        {periodHolder}\n                    </div>\n                    <div className=\"col-md-auto pl-0\">\n                        <Dropdown values={this.props.types} onChange={this.handleStateChange}/>                        \n                    </div>\n                    <div className=\"col-md-auto pl-0\">\n                        <Dropdown \n                        values={this.state.elements.map((elem) => {return {id: elem, name: elem}})} \n                        onChange={this.handleElemChange}/>     \n                    </div>\n                </div>\n                <div className=\"row\" >\n                    <div className=\"col-12\">\n                        {diagram}\n                    </div>\n                </div>\n            </div>\n            \n\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport DataContext from '../user/components/DataContext'\n\nimport DropdownDiagram from '../charts/DropdownDiagram'\nimport LineDiagram from '../charts/LineDiagram'\n\nexport default class UserMonitoring extends Component {\n\n    static contextType = DataContext\n\n    onChange = (val) => {\n        console.log(val)\n    }\n\n    render() {\n        console.log(this.context)\n        return (\n            <div className=\"card mt-2\">\n                <div className=\"card-body \">\n                    <div className=\"row justify-content-center mb-2\">\n                        <h4>Decomposed activity</h4>\n                    </div>\n                    <DropdownDiagram \n                    periods={[{id: 'daily', name: 'Daily'}, {id: 'weekly', name: 'Weekly'}, {id: 'monthly', name: 'Monthly'}]}\n                    types={[{id: 'Hull', name: 'Hulls'}, {id: 'Turret', name: 'Turrets'}]}\n                    data={this.context}\n                    graph={LineDiagram}\n                    x='timestamp'\n                    height={400}\n                    /> \n                </div>\n            </div>\n                               \n        )\n    }\n}","import serverUrl from './config'\n\nlet TrackApi = {}\n\nTrackApi.getAllTrack = async (user) => await fetchData(`${serverUrl}/user/${user}/track`)\n\nTrackApi.getLastTrack = async (user, period) => await fetchData(`${serverUrl}/user/${user}/lastTrack?period=${period}`)\n\nasync function fetchData(url) {\n    let res = await fetch(url)\n    if (res.ok) {\n        let msg = await res.json()\n        return msg\n    } else {\n        console.error('Error while processing request: ' + res.status)\n    }\n}\n\nexport default TrackApi\n","import React, { useState } from 'react'\nimport TrackApi from '../../net/TrackApi'\n\n\nexport default function CompareForm(props) {\n\n  const [input, setInput] = useState('')\n\n  const {\n    addUser,\n    setUsersData\n  } = props.callbacks\n\n  function onSubmit(event) {\n    event.preventDefault()\n\n    if (input.trim()) {\n      setUsersData(oldState => ({...oldState, isLoading: true}))\n\n      const user = input.trim()\n\n      TrackApi.getAllTrack(user)\n      .then(data => {\n        if (data) {\n          addUser(data)\n        } else {\n          console.log('no such user')\n          setUsersData(oldState => ({...oldState, isLoading: false}))\n        }\n      })\n\n      setInput('')\n    }\n  }\n\n  function onChange(event) {\n    const value = event.target.value\n    setInput(value)\n  }\n\n  return (\n    <form\n      onSubmit={onSubmit}\n      className=\"mb-3 mt-3\"\n    >\n      <div className=\"input-group mb-3 mt-3\">\n        <input\n          type=\"text\"\n          name=\"user\"\n          placeholder=\"Username\"\n          value={input}\n          onChange={onChange}\n          className=\"form-control\"\n          aria-describedby=\"button-addon\"\n        />\n        <div className=\"input-group-append\">\n          <button\n            type=\"submit\"\n            name=\"compare\"\n            value=\"compare\"\n            className=\"btn btn-outline-secondary\"\n            id=\"button-addon\"\n          >\n            Add user\n          </button>\n        </div>\n      </div>\n    </form>\n  )\n}\n","import React from 'react';\nimport {\n  BarChart,\n  Bar,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\n\nexport default function MultipleBarDiagram({diagramData}) {\n  return (\n    <>\n      {\n        diagramData !== null\n        ? <Charts diagramData={diagramData} />\n        : null\n      }\n    </>\n  )\n}\n\nfunction Charts({diagramData}) {\n  return diagramData.map(({dataName, data}, index) => {\n    const height = calcHeight(data.length)\n    const sorted = [...data].sort((first, second) => {\n      if (first[dataName] < second[dataName]) {\n        return 1\n      }\n      if (first[dataName] > second[dataName]) {\n        return -1\n      }\n        return 0\n    })\n\n    return (\n        <ResponsiveContainer\n          width=\"100%\"\n          height={height}\n          key={index}\n          // className=\"card p-3\"  \n        >\n          <BarChart\n            // width={400}\n            data={sorted}\n            layout=\"vertical\"\n            margin={{top: 5, right: 70, left: 70, bottom: 5}}\n          >\n            <XAxis\n              type=\"number\"\n              // unit=\" u\"\n              // name=\"name\"\n            />\n            <YAxis\n              dataKey=\"name\"\n              type=\"category\"\n              // unit=\"u\"\n              // name=\"name\"\n            />\n            <Tooltip />\n            <Bar\n              dataKey={dataName}\n              fill={\"#8884d8\"}\n            />\n          </BarChart>\n        </ResponsiveContainer>\n    )\n  })\n}\n\nconst calcHeight = length => ((length * 30) + 30 + 24) // + height of xaxis and legend\n","export const Nums = [\n  {\n    name: \"Exp\",\n    key: \"score\",\n  },\n  {\n    name: \"Cry\",\n    key: \"cry\"\n  },\n  {\n    name: \"Kills\",\n    key: \"kills\",\n  },\n  {\n    name: \"Deaths\",\n    key: \"deaths\",\n  }, \n]\n\nexport const Ratios = [\n  {\n    name: \"C/E\",\n    dividend: \"cry\",\n    divider: \"score\",\n  },\n  {\n    name: \"K/D\",\n    dividend: \"kills\",\n    divider: \"deaths\",\n  },\n]\n","export function parseTime(users, dataName) {\n  const data = users.map(user => \n    parseTimeFor(user, dataName)\n  )\n\n  return {\n    dataName: dataName,\n    data: data\n  }\n}\n\nexport function parseNum(users, dataName, dataKey) {\n  const data = users.map(user => \n    parseNumFor(user, dataName, dataKey)\n  )\n\n  return {\n    dataName: dataName,\n    data: data\n  }\n}\n\nexport function parseRatio(users, dataName, dividendKey, dividerKey) {\n  const data = users.map(user =>\n    parseRatioFor(user, dataName, dividendKey, dividerKey)\n  )\n\n  return {\n    dataName: dataName,\n    data: data\n  }\n}\n\nexport function parseTimeFor(user, dataName) {\n  const getHours = time => roundNum(time / 60 / 60)\n\n  return {\n    name: user.login,\n    [dataName]: getHours(user.tracking[0].time)  \n  }\n}\n\nexport function parseNumFor(user, dataName, dataKey) {\n  const number = user.tracking[0][dataKey]\n\n  return {\n    name: user.login,\n    [dataName]: number\n  }\n}\n\nexport function parseRatioFor(user, dataName, dividend, divider) {\n  const tracking = user.tracking[0]\n  const ratio = tracking[dividend] / tracking[divider]\n  const rounded = roundNum(ratio)\n\n  return {\n    name: user.login,\n    [dataName]: rounded\n  }\n}\n\nfunction roundNum(num) {\n  if (num !== 0) {\n    return Math.round((num + Number.EPSILON) * 100) / 100\n  } else {\n    return 0\n  }\n}\n","import React, {\n  useState,\n  useEffect\n} from 'react'\nimport MultipleBarDiagram from '../../charts/MultipleBarDiagram'\nimport {\n  Nums,\n  Ratios\n} from '../utils/CompareValuesGroups'\nimport {\n  parseNum,\n  parseRatio,\n  parseTime\n} from '../utils/CompareValuesParser'\nimport Dropdown from '../../charts/controls/Dropdown'\n\nexport default function CompareBarDiagram({usersData}) {\n\n  const [diagramData, setDiagramData] = useState(null)\n  const [selected, setSelected] = useState(null)\n\n  useEffect(() => {\n    const users = usersData.data\n\n    if (users.length > 0) {\n      const parsedNums = Nums.map(({name, key}) => \n        parseNum(users, name, key)\n      )\n      const parsedRatios = Ratios.map(({name, dividend, divider}) => \n        parseRatio(users, name, dividend, divider)\n      )\n      const parsedTime = parseTime(users, \"Hours played\")\n\n      setDiagramData([...parsedNums, ...parsedRatios, parsedTime])\n    } else {\n      setDiagramData(null)\n    }\n  }, [usersData.data])\n\n\n  const onChange = value => {\n    setSelected(diagramData.filter(data => data.dataName === value))\n  }\n\n  return (\n    diagramData\n    ? (<div className=\"container\">\n        <div className=\"row\">\n          <h4 className=\"col-6 col-md-2\">Chart</h4>\n          <Dropdown\n            values={diagramData.map(({dataName}) => ({id: dataName, name: dataName}))}\n            onChange={onChange}\n            className=\"col-6 col-md-10\"\n          />\n        </div>\n        <div className=\"row mt-3\">\n          <MultipleBarDiagram\n            diagramData={selected}\n            className=\"col\"\n          />\n        </div>\n      </div>)\n    : <div>No selected users</div>\n  )\n}\n","import React, { Fragment } from 'react'\nimport { Delete } from 'react-feather'\nimport { Link } from 'react-router-dom'\n\nexport default function UserList({users, delCallback}) {\n  return (\n    <Fragment>\n      <h4>Users</h4>\n      <ul className=\"list-group mt-3 mb-3\">\n        {\n          users.map((user, index) => (\n            <li\n              key={index}\n              className=\"list-group-item d-flex justify-content-between\"\n            >\n              {/* <span>{user.login}</span> */}\n              <Link to={`/user/${user.login}`}>{user.login}</Link>\n              <span\n                onClick={e => delCallback(index)}\n                className=\"span-hover\"\n              >\n                <Delete />\n              </span>\n            </li>\n          ))\n        }\n      </ul>\n    </Fragment>\n  )\n}\n","import React, {\n  useState,\n  useContext,\n} from 'react';\nimport DataContext from '../user/components/DataContext'\nimport CompareForm from './components/CompareForm'\nimport CompareBarDiagram from './components/CompareBarDiagram'\nimport UserList from './components/UserList'\n\n\n\nexport default function UserCompare() {\n  const currUserData = useContext(DataContext)\n\n  const initialUsersDataState = {\n    data: [currUserData],\n    isLoading: false, \n  }\n  const [usersData, setUsersData] = useState(initialUsersDataState)\n\n  function addUser(userData) {\n    const newData = [...usersData.data, userData]\n    setUsersData(prevState => ({...prevState, data: newData, isLoading: false}))\n  }\n\n  function delUser(index) {\n    const data = usersData.data\n    data.splice(index, 1)\n    setUsersData(prevState => ({...prevState, data: data}))\n  }\n\n  return (\n    <div>\n      <CompareForm\n        callbacks={{\n          addUser,\n          setUsersData\n        }} \n      />\n      <div className=\"container card mt-2\">\n        <div className=\"row\">\n          <div className=\"col-md-3 pt-3\">\n            <UserList\n              users={usersData.data}\n              delCallback={delUser}\n            />\n          </div>\n          <div className=\"col-md-9 pt-3\">\n            {\n              usersData.isLoading\n              ? (\n                <div className=\"d-flex align-items-center\">\n                  <strong>Loading...</strong>\n                  <div className=\"spinner-border ml-auto\" role=\"status\" aria-hidden=\"true\"></div>\n                </div>\n              )\n              : <CompareBarDiagram\n                  usersData={usersData}\n                  key={usersData.data.length}\n                />\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { Component } from 'react'\nimport DataContext from './DataContext'\n\nlet ranks = [\n    {\n        \"rank\": \"\",\n        \"score\": 0\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 1500\n    },\n    {\n        \"rank\": \"-\",\n        \"score\": 3700\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 500\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 7100\n    },\n    {\n        \"rank\": \"-\",\n        \"score\": 20000\n    },\n    {\n        \"rank\": \"-\",\n        \"score\": 41000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 100\n    },\n    {\n        \"rank\": \"-1\",\n        \"score\": 57000\n    },\n    {\n        \"rank\": \" \",\n        \"score\": 29000\n    },\n    {\n        \"rank\": \"-\",\n        \"score\": 12300\n    },\n    {\n        \"rank\": \"- 3\",\n        \"score\": 98000\n    },\n    {\n        \"rank\": \"-2\",\n        \"score\": 76000\n    },\n    {\n        \"rank\": \"-4\",\n        \"score\": 125000\n    },\n    {\n        \"rank\": \"- 5\",\n        \"score\": 156000\n    },\n    {\n        \"rank\": \" \",\n        \"score\": 192000\n    },\n    {\n        \"rank\": \" \",\n        \"score\": 280000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 233000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 332000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 390000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 455000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 527000\n    },\n    {\n        \"rank\": \"-\",\n        \"score\": 692000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 606000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 1000000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 1255000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 1600000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 1400000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 889000\n    },\n    {\n        \"rank\": \"\",\n        \"score\": 1122000\n    },\n    {\n        \"rank\": \"-\",\n        \"score\": 787000\n    }\n].sort((a, b) => a.score - b.score)\n\n\nexport default class UserBox extends Component {\n\n    static contextType = DataContext;\n\n    getRank(score) {\n        for (let idx = 0; idx < ranks.length; ++idx) {\n            let rank = ranks[idx]\n            if (rank.score > score) {\n                return ranks[idx - 1].rank\n            }\n        }\n        return \" \" + (Math.floor((score - 1600000) / 200000) + 1)\n    } \n\n    getPercent(score) {\n        if (score >= 1600000) {\n            return Math.floor(((score - 1600000) % 200000) / 2000)\n        }\n        let prev, next;\n        for (let idx = 0; idx < ranks.length; ++idx) {\n            let rank = ranks[idx]\n            if (rank.score > score)  {\n                prev = ranks[idx - 1].score\n                next = rank.score\n                break;\n            }\n        }\n        return Math.floor((score - prev) / (next - prev) * 100)\n    }\n\n    render() {\n        let data = this.context.tracking[0]\n        let login = this.context.login\n        let rank = this.getRank(data.score)\n        let percent = this.getPercent(data.score)\n        return (\n            <div>\n                <div className=\"mb-2\">\n                    <h5 className=\"card-title d-inline\">{login}</h5> <h6 className=\"text-muted d-inline\">{rank}</h6> \n                </div>\n                <div className=\"progress\">\n                <div className=\"progress-bar\" role=\"progressbar\" style={{width: percent + '%'}} \n                    aria-valuenow={percent} aria-valuemin=\"0\" aria-valuemax=\"100\">{`${percent}%`}</div>\n                </div>                \n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport AuthApi from '../../net/AuthApi'\n\nexport default class SubButton extends Component {\n\n    onSub = () => {\n        AuthApi.subTo(this.props.login).finally(() => {\n            this.props.onProfile()\n        })\n    }\n\n    onUnsub = () => {\n        AuthApi.unsubFrom(this.props.login).finally(() => {\n            this.props.onProfile()\n        })\n    }\n    \n    render() {\n        let subButton = <></>\n        if (this.props.profileData) {\n            if (this.props.profileData.accounts.find((val) => val.login === this.props.login) !== undefined) {\n                return subButton\n            }\n            let button = this.props.profileData.favourites.find((acc) => acc.login === this.props.login) ? \n                <button onClick={this.onUnsub} className=\"btn btn-sm btn-warning mt-2\">Unsubscribe</button> :\n                <button onClick={this.onSub} className=\"btn btn-sm btn-info mt-2\">Subscribe</button>     \n            \n            subButton = (<div className=\"col-auto\">\n                            {button}  \n                        </div>)\n            \n            \n        }\n        return subButton\n    }\n}","import React from 'react'\n// import { Link, useLocation } from 'react-router-dom'\n\nexport default function Tabs({onTabChange}) {\n\n  const tabs = [\n    { tab: \"home\", name: \"Home\" },\n    { tab: \"summary\", name: \"Summary\" },\n    { tab: \"monitoring\", name: \"Monitoring\" },\n    { tab: \"compare\", name: \"Compare\" },\n  ]\n\n  // const location = useLocation()\n  // console.log(location.pathname)\n  // const path = location.pathname\n\n  const createTabs = tabs => (\n    tabs.map(({tab, name}, index) => {\n      if (isActive(tab)) {\n        return (\n          <li\n            className=\"nav-item\"\n            key={index}  \n          >\n            {/* <Link\n              to={`${path}/${tab}`}\n              className=\"nav-link active\"\n              data-toggle=\"tab\"\n              role=\"tab\"\n              aria-selected=\"true\"\n            >\n              {name}\n            </Link> */}\n            <button\n              className=\"nav-link active\"\n              data-toggle=\"tab\"\n              role=\"tab\"\n              aria-selected=\"true\"\n              onClick={() => onTabChange(tab)}\n            >\n              {name}\n            </button>\n          </li>\n        )\n      }\n\n      return (\n        <li\n          className=\"nav-item\"\n          key={index}\n        >\n          {/* <Link\n            to={`${path}/${tab}`}\n            className=\"nav-link\"\n            data-toggle=\"tab\"\n            role=\"tab\"\n            aria-selected=\"false\"\n          >\n            {name}\n          </Link> */}\n          <button\n            className=\"nav-link\"\n            data-toggle=\"tab\"\n            role=\"tab\"\n            aria-selected=\"false\"\n            onClick={() => onTabChange(tab)}\n          >\n            {name}\n          </button>\n        </li>\n      )\n    })\n  )\n  \n  const isActive = tab => tab === \"home\" ? true : false\n\n  return (\n    <ul\n      className=\"nav nav-tabs mt-2\"\n      id=\"myTab\"\n      role=\"tablist\"\n    >\n      { createTabs(tabs) }\n    </ul>\n  )\n}\n","import React, { Component } from 'react'\n// import { Switch, useRouteMatch, Route } from 'react-router-dom'\n\n// pages\nimport UserHome from './UserHome'\nimport UserSummary from './UserSummary'\nimport UserMonitoring from './UserMonitoring'\nimport Compare from '../compare/Compare'\n\n// components\nimport TrackApi from '../net/TrackApi'\nimport DataContext from './components/DataContext'\nimport UserBox from './components/UserBox'\nimport SubButton from './components/SubButton'\nimport Tabs from './components/Tabs'\n\n\nexport default class UserPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            data: null,\n            isLoaded: false,\n            tab: \"home\"\n        }\n        \n    }\n\n    componentDidMount() {\n        this.updateData()\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.user == null && this.state.isLoaded) {\n            this.setState({\n                isLoaded: false\n            })\n        }\n        if (prevProps.user !== this.props.user) {\n            this.updateData()\n        }\n    }\n\n    updateData = () => {\n        if (this.props.user) {\n            TrackApi.getAllTrack(this.props.user).then((data) => {\n                this.setState({\n                    data: data,\n                    isLoaded: true\n                })\n            })\n        } else {\n            this.setState({\n                isLoaded: true\n            })\n        }\n    }\n\n    onTabChange(newTab) {\n        this.setState({\n            tab: newTab\n        })\n    }\n\n    ChooseComponent = (props) => {\n        switch(this.state.tab) {\n            case \"home\":\n                return <UserHome />\n            case \"summary\":\n                return <UserSummary />\n            case \"monitoring\":\n                return <UserMonitoring />\n            case \"compare\":\n                return <Compare />\n            default: \n                return <div></div>\n        }\n        // let match = useRouteMatch()\n\n        // return(\n        //     <Switch>\n        //         <Route path={match.path}>\n        //             <UserHome />\n        //         </Route>\n        //         <Route path={`${match.path}/summary`}>\n        //             <UserSummary />\n        //         </Route>\n        //         <Route path={`${match.path}/monitoring`}>\n        //             <UserMonitoring />\n        //         </Route>\n        //         <Route path={`${match.path}/compare`}>\n        //             <Compare />\n        //         </Route>\n        //     </Switch>\n        // )\n    }\n\n\n\n    render() {\n        if (!this.state.isLoaded || this.props.user === null) {\n            return <div></div>\n        }\n        if (this.state.data === null) {\n            return (\n                <div className=\"alert alert-danger mt-3\" role=\"alert\">\n                    User not found\n                </div>\n            )\n        }\n        if (this.state.data.tracking === null || this.state.data.tracking.length === 0) {\n            return (\n                <div className=\"alert alert-info mt-3\" role=\"alert\">\n                    This is a new user! Come later and see statistics\n                </div>\n            )\n        }\n\n\n        return (\n            <DataContext.Provider value={this.state.data} >\n                    <div className=\"card mt-2\">\n                        <div className=\"card-body pb-3\">\n                            <UserBox />\n                        </div>\n                    </div>\n                    <div className=\"row align-items-center\">\n                        <div className=\"col\">\n                            <Tabs onTabChange={this.onTabChange.bind(this)} />\n                        </div>\n                        <SubButton profileData={this.props.profileData} login={this.state.data.login} onProfile={this.props.onProfile}/>\n                        \n                    </div>\n                    \n                    <this.ChooseComponent />\n            </DataContext.Provider>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport NavBar from '../navbar/NavBar'\nimport UserPage from './UserPage'\n\nexport default class TrackPage extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            user: this.props.user ? this.props.user : null\n        }\n    }\n\n    componentDidUpdate(props) {\n        if (this.props.user !== props.user) {\n            this.setState({\n                user: this.props.user\n            })\n        } \n    }\n\n    onUserChange = (newUser) => {\n        this.setState({\n            user: newUser\n        })\n        window.history.pushState(newUser, \"\", `/user/${newUser}`)\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <NavBar onUserChange={this.onUserChange} profileData={this.props.profileData} onProfile={this.props.onProfile} />\n                <UserPage user={this.state.user} profileData={this.props.profileData} onProfile={this.props.onProfile}/>\n            </div>\n        )\n    }\n}","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport AuthApi from '../net/AuthApi'\n\nexport default class LogoutPage extends Component {\n\n    constructor(props) {\n        super(props)\n        AuthApi.logout()\n        this.props.onProfile()\n    }\n\n    render() {\n        return <Redirect to='/' />\n    }\n}","import React from 'react'\nimport Console from 'react-console-component'\n \nexport default class AdminPage extends React.Component {\n\n    echo = (text) =>  {\n        this.refs.console.log(text)\n        this.refs.console.return();\n        console.log(this.refs.console)\n    }\n\n    render () {\n        return (\n            <div className=\"row justify-content-md-center\">\n                <div className=\"col-6\">\n                <Console ref=\"console\"\n                        handler={this.echo}\n                        autofocus={true}\n                />\n                </div>\n            </div>\n            \n                    \n        )\n    }\n}","import React, { Component } from 'react'\nimport SummaryTable from '../../summary/SummaryTable'\nimport TrackApi from '../../net/TrackApi'\nimport SummaryParser from '../../user/parsers/Summary'\nimport { Link } from 'react-router-dom'\n\nexport default class AccCard extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            summary: [[], []]\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.user !== this.props.user) {\n            console.log(\"OK\")\n            this.fetchSummary()\n        }\n    }\n\n    componentDidMount() {\n        this.fetchSummary()\n    }\n\n    fetchSummary = () => {\n        TrackApi.getLastTrack(this.props.user, \"weekly\").then((res) => {\n            this.setState({\n                summary: SummaryParser.makeShortSummary(res[\"weekly\"][0])\n            })\n        }).catch((err) => {\n            console.log(err)\n        })\n    }\n\n    render() {\n        return (\n            <div className=\"col-mb-4 mt-3 pl-3 pr-3\">\n                <div className={`card border-bold border-primary h-100`}> \n                    <div className={`card-header text-center font-weight-bold `}>\n                    <Link to={`/user/${this.props.user}`}>{this.props.user}</Link>\n                    </div>\n                    <div className=\"card-body p-3 \">\n                        <div className=\"card-text\"> \n                            <SummaryTable \n                            objs={this.state.summary}\n                            />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n}","import React, { Component } from 'react'\nimport AccCard from './components/AccCard'\n\n\nexport default class ProfileFav extends Component {\n    render() {\n        if (!this.props.profileData) {\n            return <div></div>\n        }\n        let cards = this.props.profileData.favourites.map((el) => {\n            return <AccCard user={el.login} key={el.login}/>\n        })\n        return (\n            <div className=\"row row-cols-1 row-cols-lg-3 row-cols-md-2\">\n                {cards}\n            </div>\n        )\n    }\n}","import React from 'react';\nimport AuthApi from '../../net/AuthApi';\n\nexport default function AddAccountForm(props) {\n\n  let loginRef = React.createRef()\n  let inviteRef = React.createRef()\n\n  function submitHandler(event) {\n    event.preventDefault()\n    AuthApi.addAccount(loginRef.current.value, inviteRef.current.value).then(() => {\n      props.onProfile()\n    }).finally(() => {\n      document.getElementById(\"btn-close\").click()\n    })\n  };\n\n  return (\n    <form\n      className=\"modal-content\"\n      onSubmit={submitHandler}\n    >\n    <div className=\"modal-header\">\n      <h5\n        className=\"modal-title\"\n        id=\"AddAccountModalLabel\"\n      >\n        Add an account\n      </h5>\n      <button\n        id=\"btn-close\"\n        type=\"button\"\n        className=\"close\"\n        data-dismiss=\"modal\"\n        aria-label=\"Close\"\n      >\n        <span aria-hidden=\"true\">&times;</span>\n      </button>\n    </div>\n    <div className=\"modal-body\">\n      <div className='col justify-content-center'>\n        <div className='form-group col-12'>\n          <label for='loginInput'>Login</label>\n          <input\n            type='text'\n            ref={loginRef}\n            placeholder='Login'\n            id='loginInput'\n            className='col-12'\n          />\n        </div>\n        <div className='form-group col-12'>\n          <label for='inviteInput'>Invite code</label>\n          <input\n            type='text'\n            ref={inviteRef}\n            placeholder='Invite code'\n            id='inviteInput'\n            className='col-12'\n          />\n        </div>\n      </div>\n    </div>\n    <div className=\"modal-footer\">\n      <button\n        type=\"button\"\n        className=\"btn btn-secondary\"\n        data-dismiss=\"modal\"\n      >\n        Close\n      </button>\n      <button \n        type=\"submit\"\n        className=\"btn btn-primary\"\n      >\n        Add\n      </button>\n    </div>\n  </form>\n  )\n}\n","import React, { Component } from 'react'\nimport AccCard from './components/AccCard'\nimport AddAccountForm from './components/AddAccountForm'\n\n\nexport default class ProfileAcc extends Component {\n    render() {\n        if (!this.props.profileData) {\n            return <div></div>\n        }\n        let cards = this.props.profileData.accounts.map((el) => {\n            return <AccCard user={el.login} key={el.login}/>\n        })\n        return (\n            <>\n            <div className=\"row row-cols-1 row-cols-lg-3 row-cols-md-2\">\n                {cards}\n            </div>\n                <div className='row justify-content-center'>\n                  <div className='col' style={{textAlign: \"center\"}}>\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-primary mt-4\"\n                      data-toggle=\"modal\"\n                      data-target=\"#AddAccountModal\"\n                    >\n                      Add an account\n                    </button>\n                  </div>\n                </div>\n          \n                <div\n                  className=\"modal fade\"\n                  id=\"AddAccountModal\"\n                  tabindex=\"-1\"\n                  role=\"dialog\"\n                  aria-labelledby=\"AddAccountModalLabel\"\n                  aria-hidden=\"true\"\n                >\n                  <div className=\"modal-dialog\" role=\"document\">\n                    <AddAccountForm onProfile={this.props.onProfile} />\n                  </div>\n                </div>\n            </>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport NavBar from '../navbar/NavBar'\nimport ProfileFav from './ProfileFav'\nimport ProfileAcc from './ProfileAcc'\n\n\nexport default class ProfilePage extends Component  {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            tab: \"fav\"\n        }\n    }\n\n    onUserChange = (newUser) => {\n        this.props.history.push(`/user/${newUser}`)\n    }\n\n    onTabChange = (newTab) => {\n        this.setState({\n            tab: newTab\n        })\n    }\n\n    ChooseComponent = (props) => {\n        switch(this.state.tab) {\n            case \"fav\":\n                return <ProfileFav profileData={props.profileData} />\n            case \"acc\":\n                return <ProfileAcc profileData={props.profileData}  onProfile={props.onProfile}  />\n            default: \n                return <div></div>\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"container\">\n                <NavBar onUserChange={this.onUserChange} profileData={this.props.profileData} onProfile={this.props.onProfile} />\n                <ul className=\"nav nav-tabs mt-2\" id=\"myTab\" role=\"tablist\">\n                    <li className=\"nav-item\">\n                        <button className=\"nav-link active\" data-toggle=\"tab\" role=\"tab\" aria-selected=\"true\" onClick={() => this.onTabChange(\"fav\")}>Favourites</button>\n                    </li>\n                    <li className=\"nav-item\">\n                        <button className=\"nav-link\" data-toggle=\"tab\" role=\"tab\" aria-selected=\"false\" onClick={() => this.onTabChange(\"acc\")}>Accounts</button>\n                    </li>\n                </ul>\n                <this.ChooseComponent profileData={this.props.profileData} onProfile={this.props.onProfile}/>\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\n\nimport NavBar from './navbar/NavBar'\n\nexport default class Home extends Component {\n\n    onUserChange = (newUser) => {\n        this.props.history.push(`/user/${newUser}`)\n    }\n\n    render() {\n        if (this.props.profileData) {\n            return <Redirect to={`/user/${this.props.profileData.login}`} />\n        }\n        return (\n            <div className=\"container\">\n                <NavBar onUserChange={this.onUserChange} profileData={this.props.profileData} onProfile={this.props.onProfile} />\n            </div>\n        )\n    }\n}\n","import React, { Component } from 'react'\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n} from \"react-router-dom\";\nimport RegPage from './profile/RegPage';\nimport LoginPage from './profile/LoginPage'\nimport TrackPage from './user/TrackPage';\nimport LogoutPage from './profile/LogoutPage';\nimport AuthApi from './net/AuthApi';\nimport AdminPage from './profile/AdminPage';\nimport ProfilePage from './profile/ProfilePage';\nimport Home from './Home';\n  \n\nexport default class App extends Component {\n\n    constructor(props) {\n        super(props)\n        this.state = {\n            profileData: null\n        }\n    }\n\n    componentDidMount() {\n        this.onProfileChange()\n    }\n\n    onProfileChange = () => {\n        AuthApi.getUserInfo().then((info) => {\n            this.setState({\n                profileData: info\n            })\n        }, (err) => {\n            this.setState({\n                profileData: null\n            })\n        })\n    }\n    \n    render() {\n        return (\n            <Router>\n                <Switch>\n                    <Route exact path=\"/\" children={(props) => \n                        <Home history={props.history} profileData={this.state.profileData} onProfile={this.onProfileChange} />} />\n                    {/* <Route exact path=\"/\">\n                        <TrackPage user='Fizzika' profileData={this.state.profileData} onProfile={this.onProfileChange}/>\n                    </Route> */}\n                    <Route path=\"/user/:user\" children={(props) => {\n                        console.log(props.match.params.user)\n                        return <TrackPage user={props.match.params.user} profileData={this.state.profileData} onProfile={this.onProfileChange} />}\n                    } />\n                        \n                    <Route exact path=\"/signup\" children={(props) => <RegPage history={props.history} />} />\n                    <Route exact path=\"/login\" children={(props) => <LoginPage history={props.history} onProfile={this.onProfileChange}/>} />\n                    <Route exact path=\"/logout\">\n                        <LogoutPage onProfile={this.onProfileChange}/>\n                    </Route>\n                    <Route exact path=\"/admin\">\n                        <AdminPage />\n                    </Route>\n                    <Route exact path=\"/profile\" children={ (props) =>\n                        <ProfilePage profileData={this.state.profileData} history={props.history} onProfile={this.onProfileChange} />} />                        \n                </Switch>\n            </Router>\n\n        )\n    }\n\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'bootstrap/dist/js/bootstrap.min.js'\nimport './css/style.css'\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}