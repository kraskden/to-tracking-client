(this.webpackJsonprating_client=this.webpackJsonprating_client||[]).push([[0],{240:function(e,t,a){e.exports=a(428)},427:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(102),c=a.n(o),l=a(7),i=a(8),s=a(10),u=a(9),m=a(46),d=a(49),p=a(20),f=a.n(p),h=a(26),v=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SERVER_URL||"http://ec2-18-217-198-173.us-east-2.compute.amazonaws.com:4000",b={};b.login=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/profile/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:t,password:a})});case 2:if(200===(n=e.sent).status){e.next=5;break}return e.abrupt("return",Promise.reject());case 5:return e.next=7,n.json();case 7:if(!(r=e.sent).jwt){e.next=13;break}return localStorage.setItem("RTG_JWT",r.jwt),e.abrupt("return",Promise.resolve());case 13:return e.abrupt("return",Promise.reject());case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),b.logout=function(){localStorage.removeItem("RTG_JWT")},b.register=function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v,"/profile/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:t,password:a,invite:n})});case 2:if(200!==e.sent.status){e.next=7;break}return e.abrupt("return",Promise.resolve());case 7:return e.abrupt("return",Promise.reject());case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),b.getUserInfo=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=localStorage.getItem("RTG_JWT"))){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.next=5,fetch("".concat(v,"/profile/"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 5:if(200===(a=e.sent).status){e.next=10;break}return e.abrupt("return",Promise.reject());case 10:return e.next=12,a.json();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));var g=function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(a=localStorage.getItem("RTG_JWT"))){e.next=3;break}return e.abrupt("return",Promise.reject());case 3:return e.next=5,fetch(t,{method:"POST",headers:{Authorization:"Bearer ".concat(a)}});case 5:if(200===e.sent.status){e.next=8;break}return e.abrupt("return",Promise.reject());case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();b.subTo=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("".concat(v,"/profile/sub/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b.unsubFrom=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g("".concat(v,"/profile/unsub/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b.addAccount=function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("RTG_JWT"),e.next=3,fetch("".concat(v,"/profile/add/").concat(t),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({login:t,invite:a})});case 3:if(200===e.sent.status){e.next=8;break}return e.abrupt("return",Promise.reject());case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var y=b,E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),y.register(n.login.current.value,n.password.current.value,n.invite.current.value).then((function(){n.props.history.push("/login")})).catch((function(){n.setState({message:"Try again"})}))},n.login=r.a.createRef(),n.password=r.a.createRef(),n.invite=r.a.createRef(),n.state={message:"Sign Up"},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-md-4 text-center"},r.a.createElement("form",{id:"form-login",onSubmit:this.handleSubmit,method:"post",encType:"multipart/form-data"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal mt-2"},this.state.message),r.a.createElement("label",{htmlFor:"inputLogin",className:"sr-only"},"Login"),r.a.createElement("input",{type:"text",id:"inputLogin",ref:this.login,name:"login",className:"form-control mb-2",placeholder:"Login",required:!0,autoFocus:!0}),r.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),r.a.createElement("input",{type:"password",id:"inputPassword",ref:this.password,name:"password",className:"form-control mb-2",placeholder:"Password",required:!0}),r.a.createElement("label",{htmlFor:"inputInvite",className:"sr-only"},"Invite"),r.a.createElement("input",{type:"text",id:"inputInvite",ref:this.invite,name:"invite",className:"form-control mb-2",placeholder:"Invite",required:!0}),r.a.createElement("button",{className:"btn btn-lg btn-secondary btn-block",type:"submit"},"Sign up")))))}}]),a}(n.Component),k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),y.login(n.login.current.value,n.password.current.value).then((function(){console.log("OK"),n.props.onProfile(),n.props.history.replace("/")})).catch((function(e){n.setState({message:"Try again"})}))},n.login=r.a.createRef(),n.password=r.a.createRef(),n.state={message:"Sign In"},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row d-flex justify-content-center"},r.a.createElement("div",{className:"col-md-4 text-center"},r.a.createElement("form",{id:"form-login",onSubmit:this.handleSubmit,method:"post",encType:"multipart/form-data"},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal mt-2"},this.state.message),r.a.createElement("label",{htmlFor:"inputLogin",className:"sr-only"},"Login"),r.a.createElement("input",{type:"text",id:"inputLogin",ref:this.login,name:"login",className:"form-control mb-2",placeholder:"Login",required:!0,autoFocus:!0}),r.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),r.a.createElement("input",{type:"password",id:"inputPassword",ref:this.password,name:"password",className:"form-control mb-2",placeholder:"Password",required:!0}),r.a.createElement("button",{className:"btn btn-lg btn-secondary btn-block",type:"submit"},"Sign in")))))}}]),a}(n.Component);function N(e){return e.data?r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"/#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},e.data.login),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},r.a.createElement("a",{className:"dropdown-item",href:"/profile"},"Profile"),r.a.createElement("div",{className:"dropdown-divider"}),e.data.accounts.map((function(e){return r.a.createElement("a",{className:"dropdown-item",href:"/user/".concat(e.login),key:e.login},e.login)})),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{className:"dropdown-item",href:"/logout"},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{className:"nav-link dropdown-toggle",href:"/#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Action"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},r.a.createElement("a",{className:"dropdown-item",href:"/login"},"Login"),r.a.createElement("a",{className:"dropdown-item",href:"/signup"},"Register")))}function j(e){return r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(N,{data:e.data})))}var O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){e.preventDefault(),n.props.onUserChange(n.user.current.value),n.user.current.value=""},n.user=r.a.createRef(),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"/#"},"Tanki Rating"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse flex-row",id:"navbarSupportedContent"},r.a.createElement("form",{className:"form-inline ml-md-4 my-2 my-md-0 flex-md-col  ",onSubmit:this.onSubmit},r.a.createElement("input",{className:"form-control mr-sm-2",ref:this.user,type:"search",placeholder:"Search","aria-label":"Search"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search")),r.a.createElement(j,{data:this.props.profileData})))}}]),a}(n.Component);function w(e){var t=e.obj.map((function(e,t){var a=e[1]&&e[1].toLocaleString?e[1].toLocaleString():e[1];return"__empty"===e[0]?r.a.createElement("li",{key:t},r.a.createElement("div",{className:"property-empty"})):r.a.createElement("li",{key:e[0]},r.a.createElement("div",{className:"property-key"},e[0]),r.a.createElement("div",{className:"property-spacer mx-1"}),r.a.createElement("div",{className:"property-value"},a))}));return r.a.createElement("ul",{className:"property-table pl-0"},t)}function C(e){return r.a.createElement("div",{className:"summary-table mt-0 row"},r.a.createElement("div",{className:"col-6"},r.a.createElement(w,{obj:e.objs[0]})),r.a.createElement("div",{className:"col-6"},r.a.createElement(w,{obj:e.objs[1]})))}var x=a(452),S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("svg",{width:"400",height:"400",role:"img",viewBox:"0 0 400 400",style:{pointerEvents:"all",width:"100%",height:"80%"}},r.a.createElement(x.a,{data:this.props.data,style:{labels:{fontSize:20}},colorScale:"qualitative",standalone:!1}))}}]),a}(n.Component),D=a(19),P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={data:n.transformData()},n}return Object(i.a)(a,[{key:"transformData",value:function(){var e=this;return this.data=this.props.data.slice(0),this.data=this.data.map((function(t){var a={};if(a[e.props.x]=t[e.props.x],a[e.props.y]=t[e.props.y]?t[e.props.y]:0,"time"===e.props.y&&(a[e.props.y]=(a[e.props.y]/3600).toFixed(1)),"timestamp"===e.props.x){var n=new Date(t[e.props.x]);a.timestamp="".concat(n.getUTCDate(),"/").concat(n.getUTCMonth()+1)}return a})),this.data}},{key:"componentDidUpdate",value:function(e){e.y===this.props.y&&e.x===this.props.x&&e.period===this.props.period&&this.props.data===e.data||this.setState({data:this.transformData()})}},{key:"render",value:function(){return r.a.createElement(D.f,{width:"100%",height:this.props.height},r.a.createElement(D.e,{data:this.state.data},r.a.createElement(D.d,{type:"monotone",dataKey:this.props.y,stroke:"#3a3af9"}),r.a.createElement(D.c,{stroke:"#373737",strokeDasharray:"5 5"}),r.a.createElement(D.h,{dataKey:this.props.x}),r.a.createElement(D.i,{dataKey:this.props.y,domain:[0,"auto"]}),r.a.createElement(D.g,null)))}}]),a}(n.Component),T=r.a.createContext(null),A=a(57),L={};function U(e,t){var a,n=Object(A.a)(e);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.role===t)return r.name}}catch(o){n.e(o)}finally{n.f()}return"N/A"}function F(e){var t,a=Object(A.a)(e);try{for(a.s();!(t=a.n()).done;){var n,r=t.value,o=Object(A.a)(r);try{for(o.s();!(n=o.n()).done;){var c=n.value;void 0!==c[1]&&"NaN"!=="".concat(c[1])||(c[1]="\u2014")}}catch(l){o.e(l)}finally{o.f()}}}catch(l){a.e(l)}finally{a.f()}return e}L.makeHomeSummary=function(e){var t=e.time/3600;e.activities.sort((function(e,t){return t.time-e.time}));var a=U(e.activities,"Turret"),n=U(e.activities,"Hull");return[[["Score",e.score],["Time",Math.floor(t)],["Kills",e.kills],["Deaths",e.deaths],["Crystalls",e.cry]],[["K/D",(e.kills/e.deaths).toFixed(2)],["Score/Kills",(e.score/e.kills).toFixed()],["Cry/Score",(e.cry/e.score).toFixed(2)],["Turret",a],["Hull",n]]]},L.makePeriodSummary=function(e){if(!e)return[[],[]];var t=e.time/3600;e.activities.sort((function(e,t){return t.time-e.time}));var a=U(e.activities,"Turret"),n=U(e.activities,"Hull"),r=U(e.activities,"Mode"),o=U(e.activities,"Module"),c=e.supplies.find((function(e){return"DD"===e.name}))||{count:0},l=e.supplies.find((function(e){return"Battery"===e.name}))||{count:0};return F([[["Score",e.score],["Time",t.toFixed(1)],["Kills",e.kills],["Deaths",e.deaths],["Crystalls",e.cry],["Golds",e.golds?e.golds:0],["__empty",""],["Turret",a],["Hull",n],["__empty",""],["DD/Hour",(c.count/t).toFixed()]],[["K/D",(e.kills/e.deaths).toFixed(2)],["Score/Kills",(e.score/e.kills).toFixed()],["Cry/Score",(e.cry/e.score).toFixed(2)],["Kills/Hour",(e.kills/t).toFixed()],["Score/Hour",(e.score/t).toFixed()],["Cry/Hour",(e.cry/t).toFixed()],["__empty",""],["Mode",r],["Module",o],["__empty",""],["Battery/Hour",(l.count/t).toFixed()]]])},L.makeShortSummary=function(e){var t=e.time/3600;return F([[["Exp",e.score],["Time",t.toFixed(1)]],[["K/D",(e.kills/e.deaths).toFixed(2)],["Cry",e.cry]]])};var M=L,_={makeActivity:function(e,t,a){var n=e.activities.filter((function(e){return e.role===t&&e.time>0})).sort((function(e,t){return t.time-e.time})),r=n.reduce((function(e,t){return e+t.score}),0),o=n.reduce((function(e,t){return e+t.time}),0);n=n.filter((function(e){return e.time/o>=1/14})),a&&(n=n.slice(0,a));var c=o-n.reduce((function(e,t){return e+t.time}),0),l=r-n.reduce((function(e,t){return e+t.score}),0);return 0!==c&&n.push({name:"Others",score:l,time:c}),n},decorate:function(e){return e.map((function(e){return{x:e.name,y:e.time}}))}},R=_,I=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handlePeriodChange=function(e){n.setState({period:e.target.id})},n.handleStateChange=function(e){n.setState({type:e.target.id})},n.state={period:e.periods[0].id,type:e.types[0].id},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.periods.map((function(t,a){var n=0===a?"active":"";return r.a.createElement("label",{className:"btn btn-secondary ".concat(n," "),key:t.id},r.a.createElement("input",{type:"radio",onClick:e.handlePeriodChange,name:"options",id:t.id,defaultChecked:!0}),t.name?t.name:t.id)})),a=this.props.types.map((function(t,a){var n=0===a?"active":"";return r.a.createElement("label",{className:"btn btn-secondary ".concat(n),key:t.id},r.a.createElement("input",{type:"radio",onClick:e.handleStateChange,name:"options",id:t.id,defaultChecked:!0}),t.name?t.name:t.id)})),n=t.length>1?r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},t):r.a.createElement("div",null),o=a.length>1?r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},a):r.a.createElement("div",null);return r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-start ml-3 mb-2"},r.a.createElement("div",{className:"col-md-auto"},n),r.a.createElement("div",{className:"col-md-auto"},o)),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(this.props.graph,{data:this.props.data[this.state.period],period:this.state.period,height:this.props.height,x:this.props.x,y:this.state.type}))))}}]),a}(n.Component),K=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(e){console.log(e.target.id)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.context,t=this.context.tracking[0],a=R.decorate(R.makeActivity(t,"Turret",5)),n=R.decorate(R.makeActivity(t,"Hull",5)),o=R.decorate(R.makeActivity(t,"Mode",5));return r.a.createElement("div",null,r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body pb-0"},r.a.createElement(C,{objs:M.makeHomeSummary(t)}),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-lg-3 col-md-4"},r.a.createElement(S,{data:a})),r.a.createElement("div",{className:"col-lg-3 col-md-4"},r.a.createElement(S,{data:n})),r.a.createElement("div",{className:"col-lg-3 col-md-4"},r.a.createElement(S,{data:o}))))),r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body "},r.a.createElement("div",{className:"row justify-content-center mb-2"},r.a.createElement("h4",null,"Player activity")),r.a.createElement(I,{graph:P,x:"timestamp",height:300,data:e,periods:[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"}],types:[{id:"cry",name:"Crystalls"},{id:"score",name:"Score"},{id:"time",name:"Time"}]}))))}}]),a}(n.Component);K.contextType=T;var H=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.switches.map((function(t,a){var n=0===a?"active":"";return r.a.createElement("label",{className:"btn btn-secondary ".concat(n),key:t.id},r.a.createElement("input",{type:"radio",onClick:e.props.onChange,name:"options",id:t.id,defaultChecked:!0}),t.name?t.name:t.id)}));return r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},t)}}]),a}(n.Component),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(D.f,{width:"100%",height:this.props.height},r.a.createElement(D.b,{width:400,height:500,data:this.props.data,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5}},r.a.createElement(D.h,{type:"number"}),r.a.createElement(D.i,{type:"category",dataKey:this.props.x}),r.a.createElement(D.c,{strokeDasharray:"3 3"}),r.a.createElement(D.g,null),r.a.createElement(D.a,{dataKey:this.props.y,fill:"#8884d8"})))}}]),a}(n.Component),J={parseActivity:function(e,t){return e.filter((function(e){return e.role===t})).map((function(e){var t={};return t.time=Math.round(e.time/60),t.name=e.name,t}))}},W=J;function G(e){return r.a.createElement(B,{height:30*e.data.length+40,data:e.data,x:"name",y:"time"})}var q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onPeriodChange=function(e){n.setState({period:e.target.id})},n.state={period:"weekly"},n}return Object(i.a)(a,[{key:"render",value:function(){for(var e=this.context[this.state.period],t=e[e.length-1]||{activities:[]},a={},n=0,o=["Hull","Turret","Mode","Module"];n<o.length;n++){var c=o[n];a[c]=W.parseActivity(t.activities,c)}console.log(a);var l=M.makePeriodSummary(e[e.length-1]);return r.a.createElement("div",null,r.a.createElement("div",{className:"pt-3"},r.a.createElement(H,{switches:[{id:"weekly",name:"Last week"},{id:"monthly",name:"Last month"},{id:"daily",name:"Last day"}],onChange:this.onPeriodChange})),r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body pb-0"},r.a.createElement(C,{objs:l}))),r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body pb-0"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(G,{data:a.Turret})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(G,{data:a.Hull}))),r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(G,{data:a.Mode})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(G,{data:a.Module}))))))}}]),a}(n.Component);q.contextType=T;var z=a(40),V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onChange=function(e){n.setState({value:e}),n.props.onChange(e.id)},n.state={value:e.values[0]},n.props.values[0]&&n.props.onChange(n.props.values[0].id),n}return Object(i.a)(a,[{key:"compareArrays",value:function(e,t,a){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n][a]!==t[n][a])return!1;return!0}},{key:"componentDidUpdate",value:function(e,t){if(e.values!==this.props.values){if(this.compareArrays(this.props.values,e.values,"id"))return;this.setState({value:this.props.values[0]}),this.props.values[0]&&this.props.onChange(this.props.values[0].id)}}},{key:"render",value:function(){var e=this.props.values.map((function(e){}));return r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},this.state.value?this.state.value.name:"No such data"),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},e))}}]),a}(n.Component),Q=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handlePeriodChange=function(e){n.setState({period:e.target.id},n.updateElements)},n.handleStateChange=function(e){n.setState({type:e},n.updateElements)},n.handleElemChange=function(e){n.setState({element:e})},n.updateElements=function(){var e,t=n.props.data[n.state.period],a=new Set,r=Object(A.a)(t);try{for(r.s();!(e=r.n()).done;){var o,c=e.value,l=Object(A.a)(c.activities.filter((function(e){return e.role===n.state.type})));try{for(l.s();!(o=l.n()).done;){var i=o.value;a.add(i.name)}}catch(s){l.e(s)}finally{l.f()}}}catch(s){r.e(s)}finally{r.f()}console.log(a.values().next().value),n.setState({elements:Object(z.a)(a.values()),element:a.values().next().value})},n.getData=function(){console.log("Get data");var e=n.props.data[n.state.period];return e.forEach((function(e){var t=e.activities.filter((function(e){return e.name===n.state.element}))[0];e.time=t?t.time:0})),e.map((function(e){return{time:e.time,timestamp:e.timestamp}}))},n.state={period:e.periods[0].id,type:e.types[0].id,elements:[],element:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateElements()}},{key:"componentDidUpdate",value:function(e){e.data.login!==this.props.data.login?this.updateElements():console.log("!!!!")}},{key:"render",value:function(){var e=this,t=this.props.periods.map((function(t,a){var n=0===a?"active":"";return r.a.createElement("label",{className:"btn btn-secondary ".concat(n),key:t.id},r.a.createElement("input",{type:"radio",onClick:e.handlePeriodChange,name:"options",id:t.id,defaultChecked:!0}),t.name?t.name:t.id)})),a=t.length>1?r.a.createElement("div",{className:"btn-group btn-group-toggle","data-toggle":"buttons"},t):r.a.createElement("div",null),n=r.a.createElement("div",null);return this.state.element&&(n=r.a.createElement(this.props.graph,{data:this.getData(),period:this.state.period,height:this.props.height,x:this.props.x,y:"time"})),r.a.createElement("div",null,r.a.createElement("div",{className:"row justify-content-start ml-3 mb-2"},r.a.createElement("div",{className:"col-md-auto"},a),r.a.createElement("div",{className:"col-md-auto pl-0"},r.a.createElement(V,{values:this.props.types,onChange:this.handleStateChange})),r.a.createElement("div",{className:"col-md-auto pl-0"},r.a.createElement(V,{values:this.state.elements.map((function(e){return{id:e,name:e}})),onChange:this.handleElemChange}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},n)))}}]),a}(n.Component),X=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onChange=function(e){console.log(e)},e}return Object(i.a)(a,[{key:"render",value:function(){return console.log(this.context),r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body "},r.a.createElement("div",{className:"row justify-content-center mb-2"},r.a.createElement("h4",null,"Decomposed activity")),r.a.createElement(Q,{periods:[{id:"daily",name:"Daily"},{id:"weekly",name:"Weekly"},{id:"monthly",name:"Monthly"}],types:[{id:"Hull",name:"Hulls"},{id:"Turret",name:"Turrets"}],data:this.context,graph:P,x:"timestamp",height:400})))}}]),a}(n.Component);X.contextType=T;var Y=a(35),Z=a(56),$={};function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(!(a=e.sent).ok){e.next=10;break}return e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:console.error("Error while processing request: "+a.status);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}$.getAllTrack=function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee("".concat(v,"/user/").concat(t,"/track"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$.getLastTrack=function(){var e=Object(h.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee("".concat(v,"/user/").concat(t,"/lastTrack?period=").concat(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var ae=$;function ne(e){var t=Object(n.useState)(""),a=Object(Z.a)(t,2),o=a[0],c=a[1],l=e.callbacks,i=l.addUser,s=l.setUsersData;return r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),o.trim()){s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{isLoading:!0})}));var t=o.trim();ae.getAllTrack(t).then((function(e){e?i(e):(console.log("no such user"),s((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{isLoading:!1})})))})),c("")}},className:"mb-3 mt-3"},r.a.createElement("div",{className:"input-group mb-3 mt-3"},r.a.createElement("input",{type:"text",name:"user",placeholder:"Username",value:o,onChange:function(e){var t=e.target.value;c(t)},className:"form-control","aria-describedby":"button-addon"}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"submit",name:"compare",value:"compare",className:"btn btn-outline-secondary",id:"button-addon"},"Add user"))))}function re(e){var t=e.diagramData;return r.a.createElement(r.a.Fragment,null,null!==t?r.a.createElement(oe,{diagramData:t}):null)}function oe(e){return e.diagramData.map((function(e,t){var a=e.dataName,n=e.data,o=ce(n.length),c=Object(z.a)(n).sort((function(e,t){return e[a]<t[a]?1:e[a]>t[a]?-1:0}));return r.a.createElement(D.f,{width:"100%",height:o,key:t},r.a.createElement(D.b,{data:c,layout:"vertical",margin:{top:5,right:70,left:70,bottom:5}},r.a.createElement(D.h,{type:"number"}),r.a.createElement(D.i,{dataKey:"name",type:"category"}),r.a.createElement(D.g,null),r.a.createElement(D.a,{dataKey:a,fill:"#8884d8"})))}))}var ce=function(e){return 30*e+30+24},le=[{name:"Exp",key:"score"},{name:"Cry",key:"cry"},{name:"Kills",key:"kills"},{name:"Deaths",key:"deaths"}],ie=[{name:"C/E",dividend:"cry",divider:"score"},{name:"K/D",dividend:"kills",divider:"deaths"}],se=a(71);function ue(e,t){var a=e.map((function(e){return function(e,t){return Object(se.a)({name:e.login},t,(a=e.tracking[0].time,pe(a/60/60)));var a}(e,t)}));return{dataName:t,data:a}}function me(e,t,a){var n=e.map((function(e){return function(e,t,a){var n=e.tracking[0][a];return Object(se.a)({name:e.login},t,n)}(e,t,a)}));return{dataName:t,data:n}}function de(e,t,a,n){var r=e.map((function(e){return function(e,t,a,n){var r=e.tracking[0],o=pe(r[a]/r[n]);return Object(se.a)({name:e.login},t,o)}(e,t,a,n)}));return{dataName:t,data:r}}function pe(e){return 0!==e?Math.round(100*(e+Number.EPSILON))/100:0}function fe(e){var t=e.usersData,a=Object(n.useState)(null),o=Object(Z.a)(a,2),c=o[0],l=o[1],i=Object(n.useState)(null),s=Object(Z.a)(i,2),u=s[0],m=s[1];Object(n.useEffect)((function(){var e=t.data;if(e.length>0){var a=le.map((function(t){var a=t.name,n=t.key;return me(e,a,n)})),n=ie.map((function(t){var a=t.name,n=t.dividend,r=t.divider;return de(e,a,n,r)})),r=ue(e,"Hours played");l([].concat(Object(z.a)(a),Object(z.a)(n),[r]))}else l(null)}),[t.data]);return c?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("h4",{className:"col-6 col-md-2"},"Chart"),r.a.createElement(V,{values:c.map((function(e){var t=e.dataName;return{id:t,name:t}})),onChange:function(e){m(c.filter((function(t){return t.dataName===e})))},className:"col-6 col-md-10"})),r.a.createElement("div",{className:"row mt-3"},r.a.createElement(re,{diagramData:u,className:"col"}))):r.a.createElement("div",null,"No selected users")}var he=a(451);function ve(e){var t=e.users,a=e.delCallback;return r.a.createElement(n.Fragment,null,r.a.createElement("h4",null,"Users"),r.a.createElement("ul",{className:"list-group mt-3 mb-3"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"list-group-item d-flex justify-content-between"},r.a.createElement(m.b,{to:"/user/".concat(e.login)},e.login),r.a.createElement("span",{onClick:function(e){return a(t)},className:"span-hover"},r.a.createElement(he.a,null)))}))))}function be(){var e={data:[Object(n.useContext)(T)],isLoading:!1},t=Object(n.useState)(e),a=Object(Z.a)(t,2),o=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(ne,{callbacks:{addUser:function(e){var t=[].concat(Object(z.a)(o.data),[e]);c((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{data:t,isLoading:!1})}))},setUsersData:c}}),r.a.createElement("div",{className:"container card mt-2"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 pt-3"},r.a.createElement(ve,{users:o.data,delCallback:function(e){var t=o.data;t.splice(e,1),c((function(e){return Object(Y.a)(Object(Y.a)({},e),{},{data:t})}))}})),r.a.createElement("div",{className:"col-md-9 pt-3"},o.isLoading?r.a.createElement("div",{className:"d-flex align-items-center"},r.a.createElement("strong",null,"Loading..."),r.a.createElement("div",{className:"spinner-border ml-auto",role:"status","aria-hidden":"true"})):r.a.createElement(fe,{usersData:o,key:o.data.length})))))}var ge=[{rank:"\u041d\u043e\u0432\u043e\u0431\u0440\u0430\u043d\u0435\u0446",score:0},{rank:"\u041a\u0430\u043f\u0440\u0430\u043b",score:1500},{rank:"\u041c\u0430\u0441\u0442\u0435\u0440-\u043a\u0430\u043f\u0440\u0430\u043b",score:3700},{rank:"\u0415\u0444\u0440\u0435\u0439\u0442\u043e\u0440",score:500},{rank:"\u0421\u0435\u0440\u0436\u0430\u043d\u0442",score:7100},{rank:"\u041c\u0430\u0441\u0442\u0435\u0440-\u0441\u0435\u0440\u0436\u0430\u043d\u0442",score:2e4},{rank:"\u0421\u0435\u0440\u0436\u0430\u043d\u0442-\u043c\u0430\u0439\u043e\u0440",score:41e3},{rank:"\u0420\u044f\u0434\u043e\u0432\u043e\u0439",score:100},{rank:"\u0423\u043e\u0440\u044d\u043d\u0442-\u043e\u0444\u0438\u0446\u0435\u04401",score:57e3},{rank:"\u041f\u0435\u0440\u0432\u044b\u0439 \u0441\u0435\u0440\u0436\u0430\u043d\u0442",score:29e3},{rank:"\u0428\u0442\u0430\u0431-\u0441\u0435\u0440\u0436\u0430\u043d\u0442",score:12300},{rank:"\u0423\u043e\u0440\u044d\u043d\u0442-\u043e\u0444\u0438\u0446\u0435\u0440 3",score:98e3},{rank:"\u0423\u043e\u0440\u044d\u043d\u0442-\u043e\u0444\u0438\u0446\u0435\u04402",score:76e3},{rank:"\u0423\u043e\u0440\u044d\u043d\u0442-\u043e\u0444\u0438\u0446\u0435\u04404",score:125e3},{rank:"\u0423\u043e\u0440\u044d\u043d\u0442-\u043e\u0444\u0438\u0446\u0435\u0440 5",score:156e3},{rank:"\u041c\u043b\u0430\u0434\u0448\u0438\u0439 \u043b\u0435\u0439\u0442\u0435\u043d\u0430\u043d\u0442",score:192e3},{rank:"\u0421\u0442\u0430\u0440\u0448\u0438\u0439 \u043b\u0435\u0439\u0442\u0435\u043d\u0430\u043d\u0442",score:28e4},{rank:"\u041b\u0435\u0439\u0442\u0435\u043d\u0430\u043d\u0442",score:233e3},{rank:"\u041a\u0430\u043f\u0438\u0442\u0430\u043d",score:332e3},{rank:"\u041c\u0430\u0439\u043e\u0440",score:39e4},{rank:"\u041f\u043e\u0434\u043f\u043e\u043b\u043a\u043e\u0432\u043d\u0438\u043a",score:455e3},{rank:"\u041f\u043e\u043b\u043a\u043e\u0432\u043d\u0438\u043a",score:527e3},{rank:"\u0413\u0435\u043d\u0435\u0440\u0430\u043b-\u043c\u0430\u0439\u043e\u0440",score:692e3},{rank:"\u0411\u0440\u0438\u0433\u0430\u0434\u0438\u0440",score:606e3},{rank:"\u041c\u0430\u0440\u0448\u0430\u043b",score:1e6},{rank:"\u041a\u043e\u043c\u0430\u043d\u0434\u043e\u0440",score:1255e3},{rank:"\u041b\u0435\u0433\u0435\u043d\u0434\u0430",score:16e5},{rank:"\u0413\u0435\u043d\u0435\u0440\u0430\u043b\u0438\u0441\u0441\u0438\u043c\u0443\u0441",score:14e5},{rank:"\u0413\u0435\u043d\u0435\u0440\u0430\u043b",score:889e3},{rank:"\u0424\u0435\u043b\u044c\u0434\u043c\u0430\u0440\u0448\u0430\u043b",score:1122e3},{rank:"\u0413\u0435\u043d\u0435\u0440\u0430\u043b-\u043b\u0435\u0439\u0442\u0435\u043d\u0430\u043d\u0442",score:787e3}].sort((function(e,t){return e.score-t.score})),ye=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getRank",value:function(e){for(var t=0;t<ge.length;++t){if(ge[t].score>e)return ge[t-1].rank}return"\u041b\u0435\u0433\u0435\u043d\u0434\u0430 "+(Math.floor((e-16e5)/2e5)+1)}},{key:"getPercent",value:function(e){if(e>=16e5)return Math.floor((e-16e5)%2e5/2e3);for(var t,a,n=0;n<ge.length;++n){var r=ge[n];if(r.score>e){t=ge[n-1].score,a=r.score;break}}return Math.floor((e-t)/(a-t)*100)}},{key:"render",value:function(){var e=this.context.tracking[0],t=this.context.login,a=this.getRank(e.score),n=this.getPercent(e.score);return r.a.createElement("div",null,r.a.createElement("div",{className:"mb-2"},r.a.createElement("h5",{className:"card-title d-inline"},t)," ",r.a.createElement("h6",{className:"text-muted d-inline"},a)),r.a.createElement("div",{className:"progress"},r.a.createElement("div",{className:"progress-bar",role:"progressbar",style:{width:n+"%"},"aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100"},"".concat(n,"%"))))}}]),a}(n.Component);ye.contextType=T;var Ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSub=function(){y.subTo(e.props.login).finally((function(){e.props.onProfile()}))},e.onUnsub=function(){y.unsubFrom(e.props.login).finally((function(){e.props.onProfile()}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=r.a.createElement(r.a.Fragment,null);if(this.props.profileData){if(void 0!==this.props.profileData.accounts.find((function(t){return t.login===e.props.login})))return t;var a=this.props.profileData.favourites.find((function(t){return t.login===e.props.login}))?r.a.createElement("button",{onClick:this.onUnsub,className:"btn btn-sm btn-warning mt-2"},"Unsubscribe"):r.a.createElement("button",{onClick:this.onSub,className:"btn btn-sm btn-info mt-2"},"Subscribe");t=r.a.createElement("div",{className:"col-auto"},a)}return t}}]),a}(n.Component);function ke(e){var t=e.onTabChange,a=function(e){return"home"===e};return r.a.createElement("ul",{className:"nav nav-tabs mt-2",id:"myTab",role:"tablist"},function(e){return e.map((function(e,n){var o=e.tab,c=e.name;return a(o)?r.a.createElement("li",{className:"nav-item",key:n},r.a.createElement("button",{className:"nav-link active","data-toggle":"tab",role:"tab","aria-selected":"true",onClick:function(){return t(o)}},c)):r.a.createElement("li",{className:"nav-item",key:n},r.a.createElement("button",{className:"nav-link","data-toggle":"tab",role:"tab","aria-selected":"false",onClick:function(){return t(o)}},c))}))}([{tab:"home",name:"Home"},{tab:"summary",name:"Summary"},{tab:"monitoring",name:"Monitoring"},{tab:"compare",name:"Compare"}]))}var Ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateData=function(){n.props.user?ae.getAllTrack(n.props.user).then((function(e){n.setState({data:e,isLoaded:!0})})):n.setState({isLoaded:!0})},n.ChooseComponent=function(e){switch(n.state.tab){case"home":return r.a.createElement(K,null);case"summary":return r.a.createElement(q,null);case"monitoring":return r.a.createElement(X,null);case"compare":return r.a.createElement(be,null);default:return r.a.createElement("div",null)}},n.state={data:null,isLoaded:!1,tab:"home"},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.updateData()}},{key:"componentDidUpdate",value:function(e){null==e.user&&this.state.isLoaded&&this.setState({isLoaded:!1}),e.user!==this.props.user&&this.updateData()}},{key:"onTabChange",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){return this.state.isLoaded&&null!==this.props.user?null===this.state.data?r.a.createElement("div",{className:"alert alert-danger mt-3",role:"alert"},"User not found"):null===this.state.data.tracking||0===this.state.data.tracking.length?r.a.createElement("div",{className:"alert alert-info mt-3",role:"alert"},"This is a new user! Come later and see statistics"):r.a.createElement(T.Provider,{value:this.state.data},r.a.createElement("div",{className:"card mt-2"},r.a.createElement("div",{className:"card-body pb-3"},r.a.createElement(ye,null))),r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col"},r.a.createElement(ke,{onTabChange:this.onTabChange.bind(this)})),r.a.createElement(Ee,{profileData:this.props.profileData,login:this.state.data.login,onProfile:this.props.onProfile})),r.a.createElement(this.ChooseComponent,null)):r.a.createElement("div",null)}}]),a}(n.Component),je=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onUserChange=function(e){n.setState({user:e}),window.history.pushState(e,"","/user/".concat(e))},n.state={user:n.props.user?n.props.user:null},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.user!==e.user&&this.setState({user:this.props.user})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement(O,{onUserChange:this.onUserChange,profileData:this.props.profileData,onProfile:this.props.onProfile}),r.a.createElement(Ne,{user:this.state.user,profileData:this.props.profileData,onProfile:this.props.onProfile}))}}]),a}(n.Component),Oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),y.logout(),n.props.onProfile(),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,{to:"/"})}}]),a}(n.Component),we=a(217),Ce=a.n(we),xe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).echo=function(t){e.refs.console.log(t),e.refs.console.return(),console.log(e.refs.console)},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement(Ce.a,{ref:"console",handler:this.echo,autofocus:!0})))}}]),a}(r.a.Component),Se=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fetchSummary=function(){ae.getLastTrack(n.props.user,"weekly").then((function(e){n.setState({summary:M.makeShortSummary(e.weekly[0])})})).catch((function(e){console.log(e)}))},n.state={summary:[[],[]]},n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&(console.log("OK"),this.fetchSummary())}},{key:"componentDidMount",value:function(){this.fetchSummary()}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-mb-4 mt-3 pl-3 pr-3"},r.a.createElement("div",{className:"card border-bold border-primary h-100"},r.a.createElement("div",{className:"card-header text-center font-weight-bold "},r.a.createElement(m.b,{to:"/user/".concat(this.props.user)},this.props.user)),r.a.createElement("div",{className:"card-body p-3 "},r.a.createElement("div",{className:"card-text"},r.a.createElement(C,{objs:this.state.summary})))))}}]),a}(n.Component),De=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){if(!this.props.profileData)return r.a.createElement("div",null);var e=this.props.profileData.favourites.map((function(e){return r.a.createElement(Se,{user:e.login,key:e.login})}));return r.a.createElement("div",{className:"row row-cols-1 row-cols-lg-3 row-cols-md-2"},e)}}]),a}(n.Component);function Pe(e){var t=r.a.createRef(),a=r.a.createRef();return r.a.createElement("form",{className:"modal-content",onSubmit:function(n){n.preventDefault(),y.addAccount(t.current.value,a.current.value).then((function(){e.onProfile()})).finally((function(){document.getElementById("btn-close").click()}))}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"AddAccountModalLabel"},"Add an account"),r.a.createElement("button",{id:"btn-close",type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"col justify-content-center"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{for:"loginInput"},"Login"),r.a.createElement("input",{type:"text",ref:t,placeholder:"Login",id:"loginInput",className:"col-12"})),r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{for:"inviteInput"},"Invite code"),r.a.createElement("input",{type:"text",ref:a,placeholder:"Invite code",id:"inviteInput",className:"col-12"})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add")))}var Te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){if(!this.props.profileData)return r.a.createElement("div",null);var e=this.props.profileData.accounts.map((function(e){return r.a.createElement(Se,{user:e.login,key:e.login})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row row-cols-1 row-cols-lg-3 row-cols-md-2"},e),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col",style:{textAlign:"center"}},r.a.createElement("button",{type:"button",className:"btn btn-primary mt-4","data-toggle":"modal","data-target":"#AddAccountModal"},"Add an account"))),r.a.createElement("div",{className:"modal fade",id:"AddAccountModal",tabindex:"-1",role:"dialog","aria-labelledby":"AddAccountModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement(Pe,{onProfile:this.props.onProfile}))))}}]),a}(n.Component),Ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onUserChange=function(e){n.props.history.push("/user/".concat(e))},n.onTabChange=function(e){n.setState({tab:e})},n.ChooseComponent=function(e){switch(n.state.tab){case"fav":return r.a.createElement(De,{profileData:e.profileData});case"acc":return r.a.createElement(Te,{profileData:e.profileData,onProfile:e.onProfile});default:return r.a.createElement("div",null)}},n.state={tab:"fav"},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement(O,{onUserChange:this.onUserChange,profileData:this.props.profileData,onProfile:this.props.onProfile}),r.a.createElement("ul",{className:"nav nav-tabs mt-2",id:"myTab",role:"tablist"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link active","data-toggle":"tab",role:"tab","aria-selected":"true",onClick:function(){return e.onTabChange("fav")}},"Favourites")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link","data-toggle":"tab",role:"tab","aria-selected":"false",onClick:function(){return e.onTabChange("acc")}},"Accounts"))),r.a.createElement(this.ChooseComponent,{profileData:this.props.profileData,onProfile:this.props.onProfile}))}}]),a}(n.Component),Le=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onUserChange=function(t){e.props.history.push("/user/".concat(t))},e}return Object(i.a)(a,[{key:"render",value:function(){return this.props.profileData?r.a.createElement(d.a,{to:"/user/".concat(this.props.profileData.login)}):r.a.createElement("div",{className:"container"},r.a.createElement(O,{onUserChange:this.onUserChange,profileData:this.props.profileData,onProfile:this.props.onProfile}))}}]),a}(n.Component),Ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onProfileChange=function(){y.getUserInfo().then((function(e){n.setState({profileData:e})}),(function(e){n.setState({profileData:null})}))},n.state={profileData:null},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.onProfileChange()}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",children:function(t){return r.a.createElement(Le,{history:t.history,profileData:e.state.profileData,onProfile:e.onProfileChange})}}),r.a.createElement(d.b,{path:"/user/:user",children:function(t){return console.log(t.match.params.user),r.a.createElement(je,{user:t.match.params.user,profileData:e.state.profileData,onProfile:e.onProfileChange})}}),r.a.createElement(d.b,{exact:!0,path:"/signup",children:function(e){return r.a.createElement(E,{history:e.history})}}),r.a.createElement(d.b,{exact:!0,path:"/login",children:function(t){return r.a.createElement(k,{history:t.history,onProfile:e.onProfileChange})}}),r.a.createElement(d.b,{exact:!0,path:"/logout"},r.a.createElement(Oe,{onProfile:this.onProfileChange})),r.a.createElement(d.b,{exact:!0,path:"/admin"},r.a.createElement(xe,null)),r.a.createElement(d.b,{exact:!0,path:"/profile",children:function(t){return r.a.createElement(Ae,{profileData:e.state.profileData,history:t.history,onProfile:e.onProfileChange})}})))}}]),a}(n.Component);a(423),a(424),a(427);c.a.render(r.a.createElement(Ue,null),document.getElementById("root"))}},[[240,1,2]]]);
//# sourceMappingURL=main.164ae356.chunk.js.map